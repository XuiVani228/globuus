<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ГЛОБУС - Магазин канцелярии</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #0a0a0a;
            color: #e0e0e0;
            overflow-x: hidden;
        }
        
        header {
            background-color: #0f1621;
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #1e2a3a;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-button {
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 5px;
            transition: background-color 0.3s;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .nav-button:hover {
            background-color: #1e2a3a;
        }
        
        .profile-btn {
            background-color: #1a3a5f;
        }
        
        .cart-btn {
            background-color: #5f1a1a;
            position: relative;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .hero {
            height: 70vh;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1585637071663-799845ad5212?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
        }
        
        .hero h1 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #3498db;
            padding: 0 15px;
        }
        
        .hero p {
            font-size: 16px;
            margin-bottom: 30px;
            max-width: 700px;
            color: #e0e0e0;
            padding: 0 15px;
        }
        
        .btn {
            display: inline-block;
            background-color: #5f1a1a;
            color: white;
            padding: 12px 25px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 16px;
            transition: background-color 0.3s;
            cursor: pointer;
            border: none;
        }
        
        .btn:hover {
            background-color: #7a2121;
        }
        
        .back-btn {
            background-color: #1a3a5f;
            margin-bottom: 20px;
        }
        
        .back-btn:hover {
            background-color: #22487d;
        }
        
        .about {
            padding: 40px 0;
            background-color: #121212;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            color: #3498db;
        }
        
        .about-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }
        
        .about-text {
            flex: 1;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 0 15px;
        }
        
        .about-image {
            flex: 1;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #1e2a3a;
            width: 100%;
            max-width: 500px;
        }
        
        .about-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .contacts {
            padding: 40px 0;
            background-color: #0a0a0a;
            border-top: 1px solid #1e2a3a;
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .contact-card {
            background-color: #121212;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            border: 1px solid #1e2a3a;
        }
        
        .contact-card h3 {
            margin-bottom: 15px;
            color: #3498db;
        }
        
        .contact-card p {
            color: #e0e0e0;
        }
        
        .products {
            padding: 40px 0;
            background-color: #121212;
            border-top: 1px solid #1e2a3a;
        }
        
        .categories {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            padding: 0 10px;
        }
        
        .category-btn {
            padding: 6px 12px;
            background-color: #1a3a5f;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            color: #e0e0e0;
            font-size: 13px;
        }
        
        .category-btn:hover, .category-btn.active {
            background-color: #22487d;
            color: white;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .product-card {
            background-color: #0a0a0a;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
            cursor: pointer;
            border: 1px solid #1e2a3a;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .product-image {
            height: 140px;
            overflow: hidden;
            position: relative;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-info {
            padding: 12px;
        }
        
        .product-title {
            font-size: 14px;
            margin-bottom: 8px;
            color: #e0e0e0;
            min-height: 40px;
        }
        
        .product-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .product-colors {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .color-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid #1e2a3a;
            cursor: pointer;
        }
        
        .color-option.selected {
            border: 2px solid #3498db;
        }
        
        .product-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .quantity-btn {
            width: 25px;
            height: 25px;
            background-color: #1a3a5f;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .quantity-input {
            width: 40px;
            text-align: center;
            padding: 5px;
            border: 1px solid #1e2a3a;
            border-radius: 5px;
            background-color: #121212;
            color: #e0e0e0;
        }
        
        .add-to-cart {
            padding: 8px;
            background-color: #5f1a1a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 14px;
        }
        
        .add-to-cart:hover {
            background-color: #7a2121;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: #121212;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            max-width: 90%;
            width: 100%;
            position: relative;
            border: 1px solid #1e2a3a;
            color: #e0e0e0;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .product-modal {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .product-modal-image {
            flex: 1;
        }
        
        .product-modal-image img {
            width: 100%;
            border-radius: 10px;
            border: 1px solid #1e2a3a;
        }
        
        .product-modal-info {
            flex: 1;
        }
        
        .product-modal-title {
            font-size: 20px;
            margin-bottom: 12px;
            color: #3498db;
        }
        
        .product-modal-price {
            font-size: 18px;
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 12px;
        }
        
        .product-modal-colors {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .product-modal-description {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #e0e0e0;
        }
        
        .product-modal-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }
        
        footer {
            background-color: #0f1621;
            color: #e0e0e0;
            padding: 20px 0;
            text-align: center;
            border-top: 1px solid #1e2a3a;
        }
        
        .cart-page {
            padding: 40px 0;
            background-color: #121212;
            min-height: 70vh;
        }
        
        .cart-items {
            margin-bottom: 25px;
        }
        
        .cart-item {
            display: flex;
            flex-direction: column;
            padding: 12px;
            border-bottom: 1px solid #1e2a3a;
            gap: 12px;
            background-color: #0a0a0a;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .cart-item-image {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid #1e2a3a;
            align-self: center;
        }
        
        .cart-item-details {
            flex: 1;
            text-align: center;
        }
        
        .cart-item-title {
            font-size: 15px;
            margin-bottom: 5px;
            color: #e0e0e0;
        }
        
        .cart-item-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 15px;
        }
        
        .cart-item-actions {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .remove-item {
            color: #e74c3c;
            cursor: pointer;
            font-size: 18px;
        }
        
        .cart-summary {
            background-color: #0a0a0a;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #1e2a3a;
            margin-top: 15px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 15px;
            color: #e0e0e0;
        }
        
        .total {
            font-weight: bold;
            font-size: 16px;
            border-top: 1px solid #1e2a3a;
            padding-top: 12px;
        }
        
        .checkout-form {
            background-color: #0a0a0a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
            border: 1px solid #1e2a3a;
        }
        
        .form-group {
            margin-bottom: 12px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            color: #e0e0e0;
        }
        
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #1e2a3a;
            border-radius: 5px;
            font-size: 15px;
            background-color: #121212;
            color: #e0e0e0;
        }
        
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }
        
        .auth-content {
            background-color: #121212;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            max-width: 90%;
            width: 100%;
            position: relative;
            border: 1px solid #1e2a3a;
            color: #e0e0e0;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #1e2a3a;
        }
        
        .auth-tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            color: #e0e0e0;
            font-size: 14px;
        }
        
        .auth-tab.active {
            border-bottom: 3px solid #3498db;
            font-weight: bold;
            color: #3498db;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .profile-page {
            padding: 40px 0;
            background-color: #121212;
            min-height: 70vh;
        }
        
        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .profile-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: #1a3a5f;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
        }
        
        .profile-info h2 {
            margin-bottom: 8px;
            color: #3498db;
        }
        
        .profile-info p {
            color: #e0e0e0;
            font-size: 14px;
        }
        
        .profile-orders {
            margin-top: 25px;
        }
        
        .order-card {
            background-color: #0a0a0a;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border: 1px solid #1e2a3a;
        }
        
        .order-header {
            display: flex;
            flex-direction: column;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #1e2a3a;
            gap: 8px;
        }
        
        .order-products {
            margin-top: 12px;
        }
        
        .order-product {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            padding: 8px;
            background-color: #121212;
            border-radius: 5px;
        }
        
        .order-product img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid #1e2a3a;
        }
        
        .order-product div {
            flex: 1;
            font-size: 14px;
        }
        
        .order-product div div:first-child {
            color: #e0e0e0;
        }
        
        .order-product div div:last-child {
            color: #b0b0b0;
            font-size: 13px;
        }
        
        .admin-panel {
            margin-top: 25px;
            padding: 15px;
            background-color: #0a0a0a;
            border-radius: 10px;
            border: 1px solid #1e2a3a;
        }
        
        .admin-orders {
            margin-top: 15px;
        }
        
        .user-order {
            background-color: #121212;
            padding: 12px;
            border-radius: 5px;
            margin-bottom: 12px;
            border: 1px solid #1e2a3a;
        }
        
        .user-info {
            font-weight: bold;
            margin-bottom: 8px;
            color: #3498db;
            font-size: 15px;
        }
        
        .user-order-details {
            margin-bottom: 8px;
            color: #e0e0e0;
            font-size: 14px;
        }
        
        .user-order-products {
            margin-top: 8px;
            padding: 8px;
            background-color: #0a0a0a;
            border-radius: 5px;
        }
        
        .user-order-product {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
            padding: 6px;
            background-color: #121212;
            border-radius: 5px;
            font-size: 13px;
        }
        
        .user-order-product img {
            width: 35px;
            height: 35px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        .admin-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .admin-btn {
            padding: 4px 8px;
            font-size: 13px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .process-btn {
            background-color: #f39c12;
            color: white;
        }
        
        .ship-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .complete-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .cancel-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .delete-btn {
            background-color: #c0392b;
            color: white;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(20px); }
        }
        
        .notification {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background-color: #2ecc71;
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: fadeIn 0.3s;
            max-width: 90%;
        }
        
        .error-notification {
            background-color: #e74c3c;
        }

        .color-blue { background-color: #3498db; }
        .color-red { background-color: #e74c3c; }
        .color-green { background-color: #2ecc71; }
        .color-black { background-color: #2c3e50; }
        .color-white { background-color: #ecf0f1; }
        .color-yellow { background-color: #f1c40f; }
        .color-purple { background-color: #9b59b6; }
        .color-silver { background-color: #bdc3c7; }
        .color-gold { background-color: #f39c12; }
        .color-multicolor { 
            background: linear-gradient(45deg, #3498db, #e74c3c, #2ecc71, #f1c40f, #9b59b6);
            background-size: 400% 400%;
            animation: gradient 5s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">ГЛОБУС</div>
                <div class="nav-buttons">
                    <a href="#" id="profileBtn" class="nav-button profile-btn">Профиль</a>
                    <a href="#" id="cartBtn" class="nav-button cart-btn">Корзина <span class="cart-count">0</span></a>
                </div>
            </div>
        </div>
    </header>
    
    <main id="mainContent">
        <section class="hero">
            <h1>Магазин канцелярии ГЛОБУС</h1>
            <p>Широкий ассортимент качественных канцелярских товаров для офиса, школы и творчества</p>
            <a href="#products" class="btn">Перейти к товарам</a>
        </section>
        
        <section id="products" class="products">
            <div class="container">
                <h2 class="section-title">Наши товары</h2>
                
                <div class="categories">
                    <button class="category-btn active">Все товары</button>
                    <button class="category-btn">Ручки</button>
                    <button class="category-btn">Тетради</button>
                    <button class="category-btn">Бумага</button>
                    <button class="category-btn">Офис</button>
                    <button class="category-btn">Творчество</button>
                </div>
                
                <div class="products-grid">
                    <!-- Товары будут добавлены через JavaScript -->
                </div>
            </div>
        </section>
        
        <section class="about">
            <div class="container">
                <h2 class="section-title">О нашем магазине</h2>
                <div class="about-content">
                    <div class="about-text">
                        <p>Магазин "ГЛОБУС" - это место, где вы найдете все необходимое для работы, учебы и творчества. Мы работаем на рынке канцелярских товаров более 10 лет и за это время заслужили доверие тысяч клиентов.</p>
                        <p>В нашем ассортименте представлены товары от ведущих мировых производителей: ручки, карандаши, тетради, блокноты, бумага, папки, скрепки и многое другое. Мы тщательно отбираем продукцию, чтобы предложить нашим клиентам только лучшее.</p>
                        <p>Наши цены приятно удивят вас, а качество обслуживания сделает покупки комфортными и приятными.</p>
                    </div>
                    <div class="about-image">
                        <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Канцелярские товары">
                    </div>
                </div>
            </div>
        </section>
        
        <section class="contacts">
            <div class="container">
                <h2 class="section-title">Контакты</h2>
                <div class="contact-info">
                    <div class="contact-card">
                        <h3>Адрес</h3>
                        <p>г. Москва, ул. Канцелярская, д. 15</p>
                        <p>ТЦ "Офисный", 2 этаж</p>
                    </div>
                    <div class="contact-card">
                        <h3>Телефон</h3>
                        <p>+7 (495) 123-45-67</p>
                        <p>+7 (800) 123-45-67</p>
                    </div>
                    <div class="contact-card">
                        <h3>Режим работы</h3>
                        <p>Пн-Пт: 9:00 - 21:00</p>
                        <p>Сб-Вс: 10:00 - 20:00</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Модальное окно товара -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="product-modal">
                <div class="product-modal-image">
                    <img id="modalProductImage" src="" alt="">
                </div>
                <div class="product-modal-info">
                    <h2 id="modalProductTitle" class="product-modal-title"></h2>
                    <div id="modalProductPrice" class="product-modal-price"></div>
                    <div id="modalProductColors" class="product-modal-colors"></div>
                    <p id="modalProductDescription" class="product-modal-description"></p>
                    
                    <div class="product-modal-actions">
                        <div class="quantity-selector">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="1" min="1">
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <button id="addToCartModal" class="btn">Добавить в корзину</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно авторизации/регистрации -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <span class="close-modal">&times;</span>
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Вход</div>
                <div class="auth-tab" data-tab="register">Регистрация</div>
            </div>
            
            <form id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Пароль</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn">Войти</button>
            </form>
            
            <form id="registerForm" class="auth-form">
                <div class="form-group">
                    <label for="registerName">Имя</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Пароль</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerPhone">Телефон</label>
                    <input type="tel" id="registerPhone">
                </div>
                <div class="form-group">
                    <label for="registerAddress">Адрес доставки</label>
                    <textarea id="registerAddress" rows="3"></textarea>
                </div>
                <button type="submit" class="btn">Зарегистрироваться</button>
            </form>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>© 2023 Магазин канцелярии "ГЛОБУС". Все права защищены.</p>
        </div>
    </footer>
    
    <script>
        // Данные товаров с цветами
        const productsData = {
            1: {
                title: "Ручка гелевая синяя",
                price: 45,
                description: "Гелевая ручка с синими чернилами. Плавное письмо без протекания. Корпус из прочного пластика. Длина линии письма: до 1500 м. Идеально подходит для повседневного использования в офисе или школе.",
                image: "https://images.unsplash.com/photo-1585771724684-38269d6639fd?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Ручки",
                colors: [
                    { name: "синий", class: "color-blue" },
                    { name: "черный", class: "color-black" },
                    { name: "красный", class: "color-red" }
                ],
                selectedColor: "синий"
            },
            2: {
                title: "Тетрадь 48 листов",
                price: 120,
                description: "Тетрадь в клетку с 48 листами. Обложка из плотного картона с ламинацией. Внутренний блок из офсетной бумаги плотностью 60 г/м². Листы хорошо держат чернила, не просвечивают. Идеальный выбор для школьников и студентов.",
                image: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Тетради",
                colors: [
                    { name: "зеленый", class: "color-green" },
                    { name: "синий", class: "color-blue" },
                    { name: "красный", class: "color-red" },
                    { name: "желтый", class: "color-yellow" }
                ],
                selectedColor: "зеленый"
            },
            3: {
                title: "Бумага А4 (500 листов)",
                price: 450,
                description: "Офисная бумага формата А4, плотность 80 г/м². Белизна 146%. Подходит для лазерных и струйных принтеров, копировальных аппаратов и факсов. Упаковка 500 листов. Гарантированное качество печати без замятий.",
                image: "https://images.unsplash.com/photo-1603484477859-abe6a73f9366?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Бумага",
                colors: [
                    { name: "белый", class: "color-white" }
                ],
                selectedColor: "белый"
            },
            4: {
                title: "Степлер металлический",
                price: 350,
                description: "Металлический степлер на 20 листов. В комплекте 1000 скоб. Резиновая накладка для удобного использования. Гарантия 1 год. Надежный механизм, плавная работа, удобная загрузка скоб. Идеальный выбор для офиса.",
                image: "https://images.unsplash.com/photo-1596524430615-b46475ddff6e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Офис",
                colors: [
                    { name: "серебристый", class: "color-silver" },
                    { name: "черный", class: "color-black" }
                ],
                selectedColor: "серебристый"
            },
            5: {
                title: "Краски акварельные (12 цветов)",
                price: 680,
                description: "Набор акварельных красок в кюветах, 12 цветов. Яркие, насыщенные цвета. Легко размываются водой. В комплекте кисть. Высокое качество пигментов обеспечивает чистоту цвета и хорошую светостойкость. Подходит для профессиональных художников и любителей.",
                image: "https://images.unsplash.com/photo-1548425087-15a44711725f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Творчество",
                colors: [
                    { name: "мультиколор", class: "color-multicolor" }
                ],
                selectedColor: "мультиколор"
            },
            6: {
                title: "Набор ручек (4 цвета)",
                price: 180,
                description: "Набор гелевых ручек 4 цвета (синий, красный, зеленый, черный). Эргономичный корпус. Длина линии письма: до 1200 м на каждую ручку. Удобный трехгранный корпус снижает усталость при письме. Чернила на водной основе, не протекают.",
                image: "https://images.unsplash.com/photo-1519861531473-9200262188bf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Ручки",
                colors: [
                    { name: "синий", class: "color-blue" },
                    { name: "красный", class: "color-red" },
                    { name: "зеленый", class: "color-green" },
                    { name: "черный", class: "color-black" }
                ],
                selectedColor: "синий"
            },
            7: {
                title: "Тетрадь 96 листов",
                price: 210,
                description: "Тетрадь в линейку с 96 листами. Обложка с твердым переплетом. Бумага повышенной плотности (70 г/м²). Подходит для конспектов. Удобная закладка-ляссе. Уголки обложки укреплены для долговечности. Идеальный выбор для студентов.",
                image: "https://images.unsplash.com/photo-1568043210943-0e8aac4b9734?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Тетради",
                colors: [
                    { name: "синий", class: "color-blue" },
                    { name: "черный", class: "color-black" },
                    { name: "красный", class: "color-red" }
                ],
                selectedColor: "синий"
            },
            8: {
                title: "Папка для документов",
                price: 290,
                description: "Папка-регистратор с арочным механизмом. Вмещает до 250 листов. Обложка из плотного картона с виниловым покрытием. Размер А4. Удобная металлическая ручка для переноски. Внутренний карман для мелочей. Идеальна для хранения важных документов.",
                image: "https://images.unsplash.com/photo-1579530190412-b35a65e17c8d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Офис",
                colors: [
                    { name: "черный", class: "color-black" },
                    { name: "синий", class: "color-blue" },
                    { name: "красный", class: "color-red" }
                ],
                selectedColor: "черный"
            }
        };
        
        // Глобальные переменные
        let cart = [];
        let currentUser = null;
        let allOrders = [];
        const adminEmail = "admin@globus.ru"; // Админский email
        let currentProductId = null;
        
        // Элементы страницы
        const mainContent = document.getElementById('mainContent');
        const profileBtn = document.getElementById('profileBtn');
        const cartBtn = document.getElementById('cartBtn');
        const cartCountElement = document.querySelector('.cart-count');
        const authModal = document.getElementById('authModal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const productsGrid = document.querySelector('.products-grid');
        
        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            // Загружаем данные из localStorage
            loadData();
            
            // Генерируем карточки товаров
            generateProductCards();
            
            // Инициализируем обработчики событий
            initEventHandlers();
        });
        
        // Функции для работы с данными
        function loadData() {
            // Загружаем пользователя
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateProfileButton();
            }
            
            // Загружаем заказы
            const savedOrders = localStorage.getItem('allOrders');
            if (savedOrders) {
                allOrders = JSON.parse(savedOrders);
            }
            
            // Загружаем корзину
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartCount();
            }
            
            // Загружаем пользователей (для регистрации/авторизации)
            if (!localStorage.getItem('users')) {
                // Создаем тестовых пользователей, если их нет
                const users = [
                    {
                        id: 'user_1',
                        name: 'Иван Иванов',
                        email: 'user@example.com',
                        password: '123456',
                        phone: '+7 (123) 456-78-90',
                        address: 'г. Москва, ул. Примерная, д. 1',
                        orders: []
                    },
                    {
                        id: 'admin',
                        name: 'Администратор',
                        email: adminEmail,
                        password: 'admin123',
                        isAdmin: true
                    }
                ];
                localStorage.setItem('users', JSON.stringify(users));
            }
        }
        
        function saveData() {
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Обновляем пользователя в списке пользователей (если это не админ)
                if (currentUser.email !== adminEmail) {
                    const users = JSON.parse(localStorage.getItem('users'));
                    const userIndex = users.findIndex(u => u.id === currentUser.id);
                    
                    if (userIndex !== -1) {
                        users[userIndex] = {
                            ...users[userIndex],
                            name: currentUser.name,
                            email: currentUser.email,
                            address: currentUser.address,
                            phone: currentUser.phone,
                            orders: currentUser.orders || []
                        };
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                }
            }
            
            localStorage.setItem('allOrders', JSON.stringify(allOrders));
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        
        // Функции для генерации HTML
        function generateProductCards() {
            productsGrid.innerHTML = Object.keys(productsData).map(id => `
                <div class="product-card" data-id="${id}" data-category="${productsData[id].category}">
                    <div class="product-image">
                        <img src="${productsData[id].image}" alt="${productsData[id].title}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${productsData[id].title}</h3>
                        <div class="product-price">${productsData[id].price} ₽</div>
                        <div class="product-colors">
                            ${productsData[id].colors.map(color => `
                                <div class="color-option ${color.class} ${color.name === productsData[id].selectedColor ? 'selected' : ''}" 
                                     title="${color.name}" data-color="${color.name}"></div>
                            `).join('')}
                        </div>
                        <div class="product-actions">
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function generateCartItems() {
            return cart.map(item => `
                <div class="cart-item" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.title}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">${item.title}</h4>
                        <div class="cart-item-price">${item.price} ₽</div>
                        <div style="font-size: 14px; color: #b0b0b0;">Цвет: ${item.color}</div>
                    </div>
                    <div class="cart-item-actions">
                        <input type="number" class="quantity-input" value="${item.quantity}" min="1">
                        <span class="remove-item">&times;</span>
                    </div>
                </div>
            `).join('');
        }
        
        function generateUserOrders(orders) {
            return orders.map(order => `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <strong>Заказ #${order.id}</strong>
                            <span style="margin-left: 15px; color: #7f8c8d;">${formatDate(order.date)}</span>
                        </div>
                        <div>
                            <strong>${order.total} ₽</strong>
                            <span style="margin-left: 15px; color: ${getStatusColor(order.status)}">${order.status}</span>
                        </div>
                    </div>
                    <div style="margin-top: 10px; color: #b0b0b0;">
                        <div>Способ оплаты: ${order.paymentMethod === 'cash' ? 'Наличные при получении' : 'Банковская карта онлайн'}</div>
                        <div>Адрес доставки: ${order.user.address}</div>
                        <div>Телефон: ${order.user.phone}</div>
                        ${order.comment ? `<div>Комментарий: ${order.comment}</div>` : ''}
                    </div>
                    <div class="order-products">
                        ${order.items.map(item => `
                            <div class="order-product">
                                <img src="${item.image}" alt="${item.title}">
                                <div>
                                    <div>${item.title}</div>
                                    <div>Цвет: ${item.color}</div>
                                    <div>${item.price} ₽ × ${item.quantity} = ${item.price * item.quantity} ₽</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }
        
        function generateAllOrders() {
            return allOrders.slice().reverse().slice(0, 5).map(order => `
                <div class="user-order">
                    <div class="user-info">
                        ${order.user.name} (${order.user.email})
                    </div>
                    <div class="user-order-details">
                        <div><strong>Заказ #${order.id}</strong> - ${order.total} ₽ - ${formatDate(order.date)}</div>
                        <div>Телефон: ${order.user.phone}</div>
                        <div>Адрес: ${order.user.address}</div>
                        <div>Статус: <span style="color: ${getStatusColor(order.status)}">${order.status}</span></div>
                        ${order.comment ? `<div>Комментарий: ${order.comment}</div>` : ''}
                    </div>
                    <div class="user-order-products">
                        <strong>Товары:</strong>
                        ${order.items.map(item => `
                            <div class="user-order-product">
                                <img src="${item.image}" alt="${item.title}">
                                <div>
                                    <div>${item.title}</div>
                                    <div>Цвет: ${item.color}</div>
                                    <div>${item.price} ₽ × ${item.quantity} = ${item.price * item.quantity} ₽</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    ${currentUser.email === adminEmail ? `
                    <div class="admin-actions">
                        <button class="admin-btn process-btn" data-order-id="${order.id}" data-action="process">В обработке</button>
                        <button class="admin-btn ship-btn" data-order-id="${order.id}" data-action="ship">Отправлен</button>
                        <button class="admin-btn complete-btn" data-order-id="${order.id}" data-action="complete">Завершен</button>
                        <button class="admin-btn cancel-btn" data-order-id="${order.id}" data-action="cancel">Отменить</button>
                        <button class="admin-btn delete-btn" data-order-id="${order.id}" data-action="delete">Удалить</button>
                    </div>
                    ` : ''}
                </div>
            `).join('');
        }
        
        // Функции для работы с корзиной
        function addToCart(productId, quantity, color) {
            const product = productsData[productId];
            const existingItem = cart.find(item => item.id === productId && item.color === color);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: productId,
                    title: product.title,
                    price: product.price,
                    quantity: quantity,
                    image: product.image,
                    color: color
                });
            }
            
            updateCartCount();
            saveData();
            showNotification(`Добавлено ${quantity} шт. "${product.title}" (${color}) в корзину`);
        }
        
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
            saveData();
            showNotification('Товар удален из корзины');
        }
        
        function updateCartItemQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = newQuantity;
                saveData();
            }
        }
        
        function getSubtotal() {
            return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        }
        
        function getTotalItems() {
            return cart.reduce((sum, item) => sum + item.quantity, 0);
        }
        
        function calculateDelivery() {
            return getSubtotal() > 2000 ? 0 : 300;
        }
        
        function getTotal() {
            return getSubtotal() + calculateDelivery();
        }
        
        function updateCartCount() {
            const totalItems = getTotalItems();
            cartCountElement.textContent = totalItems;
        }
        
        // Функции для работы с заказами
        function placeOrder() {
            const name = document.getElementById('checkoutName').value;
            const email = document.getElementById('checkoutEmail').value;
            const phone = document.getElementById('checkoutPhone').value;
            const address = document.getElementById('checkoutAddress').value;
            const comment = document.getElementById('checkoutComment').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            if (!name || !email || !phone || !address) {
                showNotification('Пожалуйста, заполните все обязательные поля', true);
                return;
            }
            
            if (!/^[\d\s+\-()]+$/.test(phone)) {
                showNotification('Пожалуйста, введите корректный номер телефона', true);
                return;
            }
            
            // Обновляем данные пользователя
            currentUser.name = name;
            currentUser.email = email;
            currentUser.address = address;
            currentUser.phone = phone;
            
            // Создаем заказ
            const order = {
                id: generateOrderId(),
                date: new Date().toISOString(),
                user: {
                    id: currentUser.id,
                    name: currentUser.name,
                    email: currentUser.email,
                    phone: currentUser.phone,
                    address: currentUser.address
                },
                items: [...cart],
                subtotal: getSubtotal(),
                delivery: calculateDelivery(),
                total: getTotal(),
                paymentMethod: paymentMethod,
                status: 'Новый',
                comment: comment
            };
            
            // Добавляем заказ в историю пользователя
            if (!currentUser.orders) {
                currentUser.orders = [];
            }
            currentUser.orders.push(order);
            
            // Добавляем заказ в общий список заказов
            allOrders.push(order);
            
            // Очищаем корзину
            cart = [];
            updateCartCount();
            
            // Сохраняем данные
            saveData();
            
            // Показываем страницу успешного оформления заказа
            showOrderSuccessPage(order);
        }
        
        function generateOrderId() {
            return Math.floor(100000 + Math.random() * 900000);
        }
        
        function updateOrderStatus(orderId, action) {
            // Обновляем в общих заказах
            const orderIndex = allOrders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                if (action === 'delete') {
                    allOrders.splice(orderIndex, 1);
                } else {
                    allOrders[orderIndex].status = getStatusText(action);
                }
            }
            
            // Обновляем в заказах пользователя (если он есть)
            if (currentUser && currentUser.orders) {
                const userOrderIndex = currentUser.orders.findIndex(o => o.id === orderId);
                if (userOrderIndex !== -1) {
                    if (action === 'delete') {
                        currentUser.orders.splice(userOrderIndex, 1);
                    } else {
                        currentUser.orders[userOrderIndex].status = getStatusText(action);
                    }
                }
            }
            
            // Сохраняем изменения
            saveData();
            
            // Обновляем страницу профиля, если она открыта
            if (mainContent.querySelector('.profile-page')) {
                showProfilePage();
            }
            
            showNotification(`Статус заказа #${orderId} изменен на "${getStatusText(action)}"`);
        }
        
        function getStatusText(status) {
            switch (status) {
                case 'process': return 'В обработке';
                case 'ship': return 'Отправлен';
                case 'complete': return 'Завершен';
                case 'cancel': return 'Отменен';
                default: return status;
            }
        }
        
        // Функции для работы с пользователем
        function login(email, password) {
            const users = JSON.parse(localStorage.getItem('users'));
            const user = users.find(u => u.email === email && u.password === password);
            
            if (!user) {
                showNotification('Неверный email или пароль', true);
                return false;
            }
            
            currentUser = {
                id: user.id,
                name: user.name,
                email: user.email,
                address: user.address,
                phone: user.phone,
                orders: user.orders || [],
                isAdmin: user.isAdmin || false
            };
            
            saveData();
            updateProfileButton();
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Если пользователь открыл модальное окно из корзины, показываем оформление заказа
            if (mainContent.querySelector('.cart-page')) {
                showCheckoutPage();
            }
            
            showNotification(`Добро пожаловать, ${currentUser.name}!`);
            
            return true;
        }
        
        function register(name, email, password, phone, address) {
            const users = JSON.parse(localStorage.getItem('users'));
            if (users.some(u => u.email === email)) {
                showNotification('Пользователь с таким email уже зарегистрирован', true);
                return false;
            }
            
            // Создаем нового пользователя
            const newUser = {
                id: generateUserId(),
                name,
                email,
                password,
                phone,
                address,
                orders: []
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            // Автоматически входим под новым пользователем
            currentUser = {
                id: newUser.id,
                name: newUser.name,
                email: newUser.email,
                address: newUser.address,
                phone: newUser.phone,
                orders: newUser.orders
            };
            
            saveData();
            updateProfileButton();
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Если пользователь открыл модальное окно из корзины, показываем оформление заказа
            if (mainContent.querySelector('.cart-page')) {
                showCheckoutPage();
            }
            
            showNotification(`Регистрация прошла успешно! Добро пожаловать, ${name}!`);
            
            return true;
        }
        
        function generateUserId() {
            return 'user_' + Math.random().toString(36).substr(2, 9);
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateProfileButton();
            showHomePage();
            showNotification('Вы успешно вышли из системы');
        }
        
        function updateProfileButton() {
            if (currentUser) {
                profileBtn.textContent = currentUser.name.split(' ')[0]; // Показываем только имя
            } else {
                profileBtn.textContent = 'Профиль';
            }
        }
        
        // Функции для отображения страниц
        function showCartPage() {
            if (cart.length === 0) {
                mainContent.innerHTML = `
                    <div class="container cart-page">
                        <button class="btn back-btn" id="backToHomeFromCart">Назад</button>
                        <h2 class="section-title">Корзина пуста</h2>
                        <p>В вашей корзине пока нет товаров. Перейдите в каталог, чтобы добавить товары.</p>
                        <a href="#products" class="btn" id="continueShopping">Продолжить покупки</a>
                    </div>
                `;
                
                document.getElementById('backToHomeFromCart').addEventListener('click', (e) => {
                    e.preventDefault();
                    showHomePage();
                });
                
                document.getElementById('continueShopping').addEventListener('click', (e) => {
                    e.preventDefault();
                    showHomePage();
                    window.scrollTo({
                        top: document.getElementById('products').offsetTop - 20,
                        behavior: 'smooth'
                    });
                });
                
                return;
            }
            
            mainContent.innerHTML = `
                <div class="container cart-page">
                    <button class="btn back-btn" id="backToHomeFromCart">Назад</button>
                    <h2 class="section-title">Ваша корзина</h2>
                    
                    <div class="cart-items">
                        ${generateCartItems()}
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Товары (${getTotalItems()} шт.)</span>
                            <span>${getSubtotal()} ₽</span>
                        </div>
                        <div class="summary-row">
                            <span>Доставка</span>
                            <span>${calculateDelivery()} ₽</span>
                        </div>
                        <div class="summary-row total">
                            <span>Итого</span>
                            <span>${getTotal()} ₽</span>
                        </div>
                    </div>
                    
                    <button class="btn" id="checkoutBtn" style="width: 100%; margin-top: 20px;">Оформить заказ</button>
                </div>
            `;
            
            document.getElementById('backToHomeFromCart').addEventListener('click', (e) => {
                e.preventDefault();
                showHomePage();
            });
            
            // Обработчики для корзины
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = e.target.closest('.cart-item').getAttribute('data-id');
                    removeFromCart(productId);
                    showCartPage();
                });
            });
            
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('change', (e) => {
                    const productId = e.target.closest('.cart-item').getAttribute('data-id');
                    const newQuantity = parseInt(e.target.value);
                    if (newQuantity > 0) {
                        updateCartItemQuantity(productId, newQuantity);
                        showCartPage();
                    } else {
                        showNotification('Количество не может быть меньше 1', true);
                        e.target.value = 1;
                    }
                });
            });
            
            document.getElementById('checkoutBtn').addEventListener('click', () => {
                if (currentUser) {
                    showCheckoutPage();
                } else {
                    showAuthModal();
                }
            });
        }
        
        function showCheckoutPage() {
            mainContent.innerHTML = `
                <div class="container">
                    <button class="btn back-btn" id="backToCart">Назад</button>
                    <h2 class="section-title">Оформление заказа</h2>
                    
                    <div class="checkout-form">
                        <h3>Данные для доставки</h3>
                        <div class="form-group">
                            <label for="checkoutName">ФИО</label>
                            <input type="text" id="checkoutName" value="${currentUser.name}" required>
                        </div>
                        <div class="form-group">
                            <label for="checkoutEmail">Email</label>
                            <input type="email" id="checkoutEmail" value="${currentUser.email}" required>
                        </div>
                        <div class="form-group">
                            <label for="checkoutPhone">Телефон</label>
                            <input type="tel" id="checkoutPhone" value="${currentUser.phone || ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="checkoutAddress">Адрес доставки</label>
                            <textarea id="checkoutAddress" rows="3" required>${currentUser.address || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label for="checkoutComment">Комментарий к заказу</label>
                            <textarea id="checkoutComment" rows="3"></textarea>
                        </div>
                        
                        <h3 style="margin-top: 20px;">Способ оплаты</h3>
                        <div class="form-group">
                            <select id="paymentMethod">
                                <option value="cash">Наличными при получении</option>
                                <option value="card">Банковской картой онлайн</option>
                            </select>
                        </div>
                        
                        <div class="cart-summary" style="margin-top: 20px;">
                            <div class="summary-row">
                                <span>Товары (${getTotalItems()} шт.)</span>
                                <span>${getSubtotal()} ₽</span>
                            </div>
                            <div class="summary-row">
                                <span>Доставка</span>
                                <span>${calculateDelivery()} ₽</span>
                            </div>
                            <div class="summary-row total">
                                <span>Итого</span>
                                <span>${getTotal()} ₽</span>
                            </div>
                        </div>
                        
                        <button class="btn" id="placeOrderBtn" style="width: 100%; margin-top: 20px;">Подтвердить заказ</button>
                    </div>
                </div>
            `;
            
            document.getElementById('backToCart').addEventListener('click', (e) => {
                e.preventDefault();
                showCartPage();
            });
            
            document.getElementById('placeOrderBtn').addEventListener('click', placeOrder);
        }
        
        function showProfilePage() {
            let ordersHtml = '';
            
            if (currentUser.orders && currentUser.orders.length > 0) {
                ordersHtml = `
                    <h3 style="margin-top: 30px; color: #3498db;">Ваши заказы</h3>
                    <div class="profile-orders">
                        ${generateUserOrders(currentUser.orders)}
                    </div>
                `;
            } else {
                ordersHtml = '<p>У вас пока нет заказов.</p>';
            }
            
            let adminPanel = '';
            if (currentUser.isAdmin) {
                adminPanel = `
                    <div class="admin-panel">
                        <h3 style="color: #3498db;">Административная панель</h3>
                        <p>Всего заказов: ${allOrders.length}</p>
                        
                        <div class="admin-orders">
                            <h4>Последние заказы:</h4>
                            ${generateAllOrders()}
                        </div>
                    </div>
                `;
            }
            
            mainContent.innerHTML = `
                <div class="container profile-page">
                    <button class="btn back-btn" id="backToHomeFromProfile">Назад</button>
                    <div class="profile-header">
                        <div class="profile-avatar">${currentUser.name.charAt(0).toUpperCase()}</div>
                        <div class="profile-info">
                            <h2>${currentUser.name}</h2>
                            <p>${currentUser.email}</p>
                            <p>${currentUser.phone || 'Телефон не указан'}</p>
                            <p>${currentUser.address || 'Адрес не указан'}</p>
                        </div>
                    </div>
                    
                    <button class="btn" id="logoutBtn" style="margin-top: 15px;">Выйти</button>
                    
                    ${ordersHtml}
                    ${adminPanel}
                </div>
            `;
            
            document.getElementById('backToHomeFromProfile').addEventListener('click', (e) => {
                e.preventDefault();
                showHomePage();
            });
            
            document.getElementById('logoutBtn').addEventListener('click', logout);
        }
        
        function showOrderSuccessPage(order) {
            mainContent.innerHTML = `
                <div class="container" style="text-align: center; padding: 60px 0;">
                    <h2 class="section-title">Заказ успешно оформлен!</h2>
                    <p style="font-size: 16px; margin-bottom: 20px;">Номер вашего заказа: #${order.id}</p>
                    <p style="font-size: 16px; margin-bottom: 20px;">Сумма заказа: ${order.total} ₽</p>
                    <p style="font-size: 16px; margin-bottom: 20px;">Статус: <span style="color: ${getStatusColor(order.status)}">${order.status}</span></p>
                    <p style="font-size: 16px; margin-bottom: 30px;">Мы свяжемся с вами для подтверждения заказа.</p>
                    <a href="#" class="btn" id="backToHome">Вернуться на главную</a>
                </div>
            `;
            
            document.getElementById('backToHome').addEventListener('click', (e) => {
                e.preventDefault();
                showHomePage();
            });
        }
        
        function showAuthModal() {
            authModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function showHomePage() {
            mainContent.innerHTML = `
                <section class="hero">
                    <h1>Магазин канцелярии ГЛОБУС</h1>
                    <p>Широкий ассортимент качественных канцелярских товаров для офиса, школы и творчества</p>
                    <a href="#products" class="btn">Перейти к товарам</a>
                </section>
                
                <section id="products" class="products">
                    <div class="container">
                        <h2 class="section-title">Наши товары</h2>
                        
                        <div class="categories">
                            <button class="category-btn active">Все товары</button>
                            <button class="category-btn">Ручки</button>
                            <button class="category-btn">Тетради</button>
                            <button class="category-btn">Бумага</button>
                            <button class="category-btn">Офис</button>
                            <button class="category-btn">Творчество</button>
                        </div>
                        
                        <div class="products-grid">
                            ${generateProductCards()}
                        </div>
                    </div>
                </section>
                
                <section class="about">
                    <div class="container">
                        <h2 class="section-title">О нашем магазине</h2>
                        <div class="about-content">
                            <div class="about-text">
                                <p>Магазин "ГЛОБУС" - это место, где вы найдете все необходимое для работы, учебы и творчества. Мы работаем на рынке канцелярских товаров более 10 лет и за это время заслужили доверие тысяч клиентов.</p>
                                <p>В нашем ассортименте представлены товары от ведущих мировых производителей: ручки, карандаши, тетради, блокноты, бумага, папки, скрепки и многое другое. Мы тщательно отбираем продукцию, чтобы предложить нашим клиентам только лучшее.</p>
                                <p>Наши цены приятно удивят вас, а качество обслуживания сделает покупки комфортными и приятными.</p>
                            </div>
                            <div class="about-image">
                                <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Канцелярские товары">
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="contacts">
                    <div class="container">
                        <h2 class="section-title">Контакты</h2>
                        <div class="contact-info">
                            <div class="contact-card">
                                <h3>Адрес</h3>
                                <p>г. Москва, ул. Канцелярская, д. 15</p>
                                <p>ТЦ "Офисный", 2 этаж</p>
                            </div>
                            <div class="contact-card">
                                <h3>Телефон</h3>
                                <p>+7 (495) 123-45-67</p>
                                <p>+7 (800) 123-45-67</p>
                            </div>
                            <div class="contact-card">
                                <h3>Режим работы</h3>
                                <p>Пн-Пт: 9:00 - 21:00</p>
                                <p>Сб-Вс: 10:00 - 20:00</p>
                            </div>
                        </div>
                    </div>
                </section>
            `;
            
            // Инициализируем обработчики событий для товаров
            initProductHandlers();
        }
        
        // Вспомогательные функции
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        function getStatusColor(status) {
            switch (status) {
                case 'Новый': return '#3498db';
                case 'В обработке': return '#f39c12';
                case 'Отправлен': return '#9b59b6';
                case 'Завершен': return '#2ecc71';
                case 'Отменен': return '#e74c3c';
                default: return '#7f8c8d';
            }
        }
        
        function showNotification(message, isError = false) {
            const notification = document.createElement('div');
            notification.className = isError ? 'notification error-notification' : 'notification';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Инициализация обработчиков событий
        function initEventHandlers() {
            // Обработчики для навигации
            profileBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentUser) {
                    showProfilePage();
                } else {
                    showAuthModal();
                }
            });
            
            cartBtn.addEventListener('click', (e) => {
                e.preventDefault();
                showCartPage();
            });
            
            // Обработчики для модального окна авторизации
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}Form`).classList.add('active');
                });
            });
            
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                login(email, password);
            });
            
            document.getElementById('registerForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const phone = document.getElementById('registerPhone').value;
                const address = document.getElementById('registerAddress').value;
                register(name, email, password, phone, address);
            });
            
            // Обработчики для закрытия модальных окон
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                    document.body.style.overflow = 'auto';
                });
            });
            
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Обработчики для админских действий
            document.addEventListener('click', (e) => {
                if (e.target.hasAttribute('data-order-id') && e.target.hasAttribute('data-action')) {
                    const orderId = parseInt(e.target.getAttribute('data-order-id'));
                    const action = e.target.getAttribute('data-action');
                    
                    updateOrderStatus(orderId, action);
                }
            });
            
            // Инициализируем обработчики событий для товаров
            initProductHandlers();
        }
        
        function initProductHandlers() {
            // Обработчики для карточек товаров
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (e.target.classList.contains('add-to-cart') || 
                        e.target.classList.contains('color-option')) {
                        return;
                    }
                    
                    const productId = card.getAttribute('data-id');
                    const product = productsData[productId];
                    
                    document.getElementById('modalProductImage').src = product.image;
                    document.getElementById('modalProductTitle').textContent = product.title;
                    document.getElementById('modalProductPrice').textContent = `${product.price} ₽`;
                    
                    // Генерируем цвета для модального окна
                    const colorsContainer = document.getElementById('modalProductColors');
                    colorsContainer.innerHTML = product.colors.map(color => `
                        <div class="color-option ${color.class} ${color.name === product.selectedColor ? 'selected' : ''}" 
                             title="${color.name}" data-color="${color.name}"></div>
                    `).join('');
                    
                    document.getElementById('modalProductDescription').textContent = product.description;
                    document.querySelector('.modal-content .quantity-input').value = 1;
                    
                    document.getElementById('productModal').style.display = 'block';
                    document.body.style.overflow = 'hidden';
                    
                    // Устанавливаем текущий товар
                    currentProductId = productId;
                });
            });
            
            // Обработчики для кнопок "В корзину" на карточках товаров (главная страница)
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const productId = btn.closest('.product-card').getAttribute('data-id');
                    const quantity = 1; // Всегда добавляем 1 шт с главной страницы
                    const selectedColor = btn.closest('.product-card').querySelector('.color-option.selected')?.getAttribute('data-color') || 
                                         productsData[productId].selectedColor;
                    
                    addToCart(productId, quantity, selectedColor);
                    showNotification(`Добавлено "${productsData[productId].title}" (${selectedColor}) в корзину`);
                });
            });
            
            // Обработчики для выбора цвета на карточках товаров
            document.querySelectorAll('.color-option').forEach(colorOption => {
                colorOption.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const card = e.target.closest('.product-card');
                    card.querySelectorAll('.color-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    e.target.classList.add('selected');
                });
            });
            
            // Обработчики для модального окна товара
            document.querySelector('.modal-content .quantity-btn.minus').addEventListener('click', () => {
                const input = document.querySelector('.modal-content .quantity-input');
                if (input.value > 1) {
                    input.value--;
                }
            });
            
            document.querySelector('.modal-content .quantity-btn.plus').addEventListener('click', () => {
                const input = document.querySelector('.modal-content .quantity-input');
                input.value++;
            });
            
            // Обработчики для выбора цвета в модальном окне
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('color-option') && e.target.closest('#modalProductColors')) {
                    const colorOptions = document.querySelectorAll('#modalProductColors .color-option');
                    colorOptions.forEach(option => {
                        option.classList.remove('selected');
                    });
                    e.target.classList.add('selected');
                }
            });
            
            document.getElementById('addToCartModal').addEventListener('click', () => {
                if (currentProductId) {
                    const quantity = parseInt(document.querySelector('.modal-content .quantity-input').value);
                    const selectedColor = document.querySelector('#modalProductColors .color-option.selected')?.getAttribute('data-color') || 
                                         productsData[currentProductId].selectedColor;
                    
                    if (quantity > 0) {
                        addToCart(currentProductId, quantity, selectedColor);
                        document.getElementById('productModal').style.display = 'none';
                        document.body.style.overflow = 'auto';
                    } else {
                        showNotification('Количество не может быть меньше 1', true);
                        document.querySelector('.modal-content .quantity-input').value = 1;
                    }
                }
            });
            
            // Обработчики для фильтрации по категориям
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    const category = btn.textContent;
                    const productCards = document.querySelectorAll('.product-card');
                    
                    productCards.forEach(card => {
                        if (category === 'Все товары' || card.getAttribute('data-category') === category) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        }
    </script>
</body>
</html>