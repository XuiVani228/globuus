<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ГЛОБУС - Магазин канцелярии</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            font-size: 14px;
        }
        
        header {
            background-color: #2c3e50;
            color: white;
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .container {
            width: 95%;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
            color: #ecf0f1;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-button {
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 5px;
            transition: background-color 0.3s;
            font-size: 14px;
        }
        
        .nav-button:hover {
            background-color: #34495e;
        }
        
        .profile-btn {
            background-color: #3a5169;
        }
        
        .cart-btn {
            background-color: #4a6b8a;
            position: relative;
        }
        
        .cart-count {
            position: absolute;
            top: -6px;
            right: -6px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }
        
        .hero {
            height: 60vh;
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1585637071663-799845ad5212?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding: 0 15px;
        }
        
        .hero h1 {
            font-size: 28px;
            margin-bottom: 15px;
        }
        
        .hero p {
            font-size: 16px;
            margin-bottom: 25px;
            max-width: 100%;
        }
        
        .btn {
            display: inline-block;
            background-color: #3a5169;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 16px;
            transition: background-color 0.3s;
            cursor: pointer;
            border: none;
        }
        
        .btn:hover {
            background-color: #4a6b8a;
        }

        .back-btn {
            display: inline-block;
            background-color: #95a5a6;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 16px;
            transition: background-color 0.3s;
            cursor: pointer;
            border: none;
            margin-top: 20px;
        }
        
        .back-btn:hover {
            background-color: #7f8c8d;
        }
        
        .about {
            padding: 40px 0;
            background-color: white;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
            color: #2c3e50;
        }
        
        .about-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .about-text {
            flex: 1;
        }
        
        .about-text p {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .about-image {
            flex: 1;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .about-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .contacts {
            padding: 40px 0;
            background-color: #f1f1f1;
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .contact-card {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .contact-card h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        /* Стили для каталога товаров */
        .products {
            padding: 40px 0;
            background-color: white;
        }
        
        .categories {
            display: flex;
            justify-content: flex-start;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: nowrap;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
        }
        
        .category-btn {
            padding: 6px 12px;
            background-color: #ecf0f1;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            white-space: nowrap;
            font-size: 13px;
        }
        
        .category-btn:hover, .category-btn.active {
            background-color: #3a5169;
            color: white;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .product-card:hover {
            transform: translateY(-3px);
        }
        
        .product-image {
            height: 150px;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-title {
            font-size: 15px;
            margin-bottom: 8px;
            height: 40px;
            overflow: hidden;
        }
        
        .product-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .color-options {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .color-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid #ddd;
            cursor: pointer;
        }
        
        .color-option.selected {
            border: 2px solid #2c3e50;
        }
        
        .add-to-cart {
            width: 100%;
            padding: 8px;
            background-color: #3a5169;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 14px;
        }
        
        .add-to-cart:hover {
            background-color: #4a6b8a;
        }
        
        /* Модальное окно товара */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            max-width: 95%;
            width: 100%;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .product-modal {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .product-modal-image {
            flex: 1;
        }
        
        .product-modal-image img {
            width: 100%;
            border-radius: 8px;
        }
        
        .product-modal-info {
            flex: 1;
        }
        
        .product-modal-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .product-modal-price {
            font-size: 18px;
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .product-modal-description {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .product-modal-color {
            margin-bottom: 15px;
        }
        
        .product-modal-color-title {
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .product-modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-direction: column;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quantity-btn {
            width: 30px;
            height: 30px;
            background-color: #ecf0f1;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .quantity-input {
            width: 50px;
            text-align: center;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        footer {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            text-align: center;
            font-size: 14px;
        }
        
        /* Стили для страницы корзины */
        .cart-page {
            padding: 40px 0;
            background-color: white;
        }
        
        .cart-items {
            margin-bottom: 30px;
        }
        
        .cart-item {
            display: flex;
            flex-direction: column;
            padding: 15px;
            border-bottom: 1px solid #eee;
            gap: 15px;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            align-self: center;
        }
        
        .cart-item-details {
            flex: 1;
            text-align: center;
        }
        
        .cart-item-title {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .cart-item-color {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            font-weight: bold;
            color: #e74c3c;
        }
        
        .cart-item-actions {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .remove-item {
            color: #e74c3c;
            cursor: pointer;
            font-size: 18px;
        }
        
        .cart-summary {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .total {
            font-weight: bold;
            font-size: 18px;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }
        
        /* Стили для формы оформления заказа */
        .checkout-form {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 14px;
        }
        
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        /* Стили для модального окна авторизации */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
        }
        
        .auth-content {
            background-color: white;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            max-width: 95%;
            width: 100%;
            position: relative;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .auth-tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-size: 14px;
        }
        
        .auth-tab.active {
            border-bottom: 3px solid #3a5169;
            font-weight: bold;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        /* Стили для страницы профиля */
        .profile-page {
            padding: 40px 0;
            background-color: white;
        }
        
        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #3a5169;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            font-weight: bold;
        }
        
        .profile-info h2 {
            margin-bottom: 5px;
            font-size: 20px;
        }
        
        .profile-orders {
            margin-top: 30px;
        }
        
        .order-card {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .order-header {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
            gap: 5px;
        }
        
        .order-details {
            margin-top: 10px;
            font-size: 13px;
            color: #7f8c8d;
        }
        
        .order-details p {
            margin-bottom: 5px;
        }
        
        .order-products {
            margin-top: 10px;
        }
        
        .order-product {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .order-product:last-child {
            border-bottom: none;
        }
        
        .order-product img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
        }
        
        .order-product-info {
            flex: 1;
        }
        
        .order-product-title {
            font-size: 14px;
        }
        
        .order-product-color {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .order-product-price {
            font-size: 14px;
            font-weight: bold;
        }
        
        /* Админ панель */
        .admin-panel {
            margin-top: 30px;
            padding: 15px;
            background-color: #f1f1f1;
            border-radius: 8px;
        }
        
        .admin-orders {
            margin-top: 15px;
        }
        
        .user-order {
            background-color: white;
            padding: 12px;
            border-radius: 5px;
            margin-bottom: 12px;
            font-size: 13px;
        }
        
        .user-info {
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .order-status-actions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .order-status-actions .btn {
            padding: 5px 8px;
            font-size: 12px;
        }
        
        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }
        
        /* Улучшения для мобильных устройств */
        @media (min-width: 576px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .contact-info {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .contact-card {
                flex: 1;
                min-width: calc(50% - 10px);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">ГЛОБУС</div>
                <div class="nav-buttons">
                    <a href="#" id="profileBtn" class="nav-button profile-btn">Профиль</a>
                    <a href="#" id="cartBtn" class="nav-button cart-btn">Корзина <span class="cart-count">0</span></a>
                </div>
            </div>
        </div>
    </header>
    
    <main id="mainContent">
        <section class="hero">
            <h1>Магазин канцелярии ГЛОБУС</h1>
            <p>Широкий ассортимент качественных канцелярских товаров для офиса, школы и творчества</p>
            <a href="#products" class="btn">Перейти к товарам</a>
        </section>
        
        <section id="products" class="products">
            <div class="container">
                <h2 class="section-title">Наши товары</h2>
                
                <div class="categories">
                    <button class="category-btn active">Все товары</button>
                    <button class="category-btn">Ручки</button>
                    <button class="category-btn">Тетради</button>
                    <button class="category-btn">Бумага</button>
                    <button class="category-btn">Офис</button>
                    <button class="category-btn">Творчество</button>
                </div>
                
                <div class="products-grid">
                    <!-- Товар 1 -->
                    <div class="product-card" data-id="1" data-category="Ручки">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1585771724684-38269d6639fd?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Ручка гелевая">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Ручка гелевая синяя</h3>
                            <div class="color-options">
                                <div class="color-option selected" style="background-color: #3498db;" data-color="Синий"></div>
                                <div class="color-option" style="background-color: #e74c3c;" data-color="Красный"></div>
                                <div class="color-option" style="background-color: #2ecc71;" data-color="Зеленый"></div>
                            </div>
                            <div class="product-price">45 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 2 -->
                    <div class="product-card" data-id="2" data-category="Тетради">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Тетрадь">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Тетрадь 48 листов</h3>
                            <div class="color-options">
                                <div class="color-option selected" style="background-color: #ffffff; border: 1px solid #ddd;" data-color="Белая"></div>
                                <div class="color-option" style="background-color: #f1c40f;" data-color="Желтая"></div>
                                <div class="color-option" style="background-color: #9b59b6;" data-color="Фиолетовая"></div>
                            </div>
                            <div class="product-price">120 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 3 -->
                    <div class="product-card" data-id="3" data-category="Бумага">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1603484477859-abe6a73f9366?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Бумага">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Бумага А4 (500 листов)</h3>
                            <div class="product-price">450 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 4 -->
                    <div class="product-card" data-id="4" data-category="Офис">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1596524430615-b46475ddff6e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Степлер">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Степлер металлический</h3>
                            <div class="color-options">
                                <div class="color-option selected" style="background-color: #95a5a6;" data-color="Серый"></div>
                                <div class="color-option" style="background-color: #34495e;" data-color="Темно-синий"></div>
                                <div class="color-option" style="background-color: #e74c3c;" data-color="Красный"></div>
                            </div>
                            <div class="product-price">350 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 5 -->
                    <div class="product-card" data-id="5" data-category="Творчество">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1548425087-15a44711725f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Краски">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Краски акварельные (12 цветов)</h3>
                            <div class="product-price">680 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 6 -->
                    <div class="product-card" data-id="6" data-category="Ручки">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1519861531473-9200262188bf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Ручки">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Набор ручек (4 цвета)</h3>
                            <div class="product-price">180 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 7 -->
                    <div class="product-card" data-id="7" data-category="Тетради">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1568043210943-0e8aac4b9734?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Тетрадь">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Тетрадь 96 листов</h3>
                            <div class="color-options">
                                <div class="color-option selected" style="background-color: #ffffff; border: 1px solid #ddd;" data-color="Белая"></div>
                                <div class="color-option" style="background-color: #1abc9c;" data-color="Бирюзовая"></div>
                                <div class="color-option" style="background-color: #e67e22;" data-color="Оранжевая"></div>
                            </div>
                            <div class="product-price">210 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                    
                    <!-- Товар 8 -->
                    <div class="product-card" data-id="8" data-category="Офис">
                        <div class="product-image">
                            <img src="https://images.unsplash.com/photo-1579530190412-b35a65e17c8d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Папка">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">Папка для документов</h3>
                            <div class="color-options">
                                <div class="color-option selected" style="background-color: #34495e;" data-color="Темно-синий"></div>
                                <div class="color-option" style="background-color: #e74c3c;" data-color="Красный"></div>
                                <div class="color-option" style="background-color: #2c3e50;" data-color="Черный"></div>
                            </div>
                            <div class="product-price">290 ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="about">
            <div class="container">
                <h2 class="section-title">О нашем магазине</h2>
                <div class="about-content">
                    <div class="about-text">
                        <p>Магазин "ГЛОБУС" - это место, где вы найдете все необходимое для работы, учебы и творчества. Мы работаем на рынке канцелярских товаров более 10 лет и за это время заслужили доверие тысяч клиентов.</p>
                        <p>В нашем ассортименте представлены товары от ведущих мировых производителей: ручки, карандаши, тетради, блокноты, бумага, папки, скрепки и многое другое. Мы тщательно отбираем продукцию, чтобы предложить нашим клиентам только лучшее.</p>
                        <p>Наши цены приятно удивят вас, а качество обслуживания сделает покупки комфортными и приятными.</p>
                    </div>
                    <div class="about-image">
                        <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Канцелярские товары">
                    </div>
                </div>
            </div>
        </section>
        
        <section class="contacts">
            <div class="container">
                <h2 class="section-title">Контакты</h2>
                <div class="contact-info">
                    <div class="contact-card">
                        <h3>Адрес</h3>
                        <p>г. Москва, ул. Канцелярская, д. 15</p>
                        <p>ТЦ "Офисный", 2 этаж</p>
                    </div>
                    <div class="contact-card">
                        <h3>Телефон</h3>
                        <p>+7 (495) 123-45-67</p>
                        <p>+7 (800) 123-45-67</p>
                    </div>
                    <div class="contact-card">
                        <h3>Режим работы</h3>
                        <p>Пн-Пт: 9:00 - 21:00</p>
                        <p>Сб-Вс: 10:00 - 20:00</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Модальное окно товара -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="product-modal">
                <div class="product-modal-image">
                    <img id="modalProductImage" src="" alt="">
                </div>
                <div class="product-modal-info">
                    <h2 id="modalProductTitle" class="product-modal-title"></h2>
                    <div id="modalProductPrice" class="product-modal-price"></div>
                    <p id="modalProductDescription" class="product-modal-description"></p>
                    
                    <div class="product-modal-color" id="modalProductColorContainer" style="display: none;">
                        <div class="product-modal-color-title">Цвет:</div>
                        <div class="color-options" id="modalColorOptions"></div>
                    </div>
                    
                    <div class="product-modal-actions">
                        <div class="quantity-selector">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="1" min="1">
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <button id="addToCartModal" class="btn">Добавить в корзину</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно авторизации/регистрации -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <span class="close-modal">&times;</span>
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Вход</div>
                <div class="auth-tab" data-tab="register">Регистрация</div>
            </div>
            
            <form id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Пароль</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn">Войти</button>
            </form>
            
            <form id="registerForm" class="auth-form">
                <div class="form-group">
                    <label for="registerName">Имя</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Пароль</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerAddress">Адрес доставки</label>
                    <textarea id="registerAddress" rows="3"></textarea>
                </div>
                <button type="submit" class="btn">Зарегистрироваться</button>
            </form>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>© 2023 Магазин канцелярии "ГЛОБУС". Все права защищены.</p>
        </div>
    </footer>
    
    <script>
        // Данные товаров с цветами
        const productsData = {
            1: {
                title: "Ручка гелевая синяя",
                price: 45,
                description: "Гелевая ручка с синими чернилами. Плавное письмо без протекания. Корпус из прочного пластика. Длина линии письма: до 1500 м.",
                image: "https://images.unsplash.com/photo-1585771724684-38269d6639fd?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Ручки",
                colors: [
                    { name: "Синий", code: "#3498db" },
                    { name: "Красный", code: "#e74c3c" },
                    { name: "Зеленый", code: "#2ecc71" }
                ]
            },
            2: {
                title: "Тетрадь 48 листов",
                price: 120,
                description: "Тетрадь в клетку с 48 листами. Обложка из плотного картона с ламинацией. Внутренний блок из офсетной бумаги плотностью 60 г/м².",
                image: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Тетради",
                colors: [
                    { name: "Белая", code: "#ffffff" },
                    { name: "Желтая", code: "#f1c40f" },
                    { name: "Фиолетовая", code: "#9b59b6" }
                ]
            },
            3: {
                title: "Бумага А4 (500 листов)",
                price: 450,
                description: "Офисная бумага формата А4, плотность 80 г/м². Белизна 146%. Подходит для лазерных и струйных printers. Упаковка 500 листов.",
                image: "https://images.unsplash.com/photo-1603484477859-abe6a73f9366?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Бумага"
            },
            4: {
                title: "Степлер металлический",
                price: 350,
                description: "Металлический степлер на 20 листов. В комплекте 1000 скоб. Резиновая накладка для удобного использования. Гарантия 1 год.",
                image: "https://images.unsplash.com/photo-1596524430615-b46475ddff6e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Офис",
                colors: [
                    { name: "Серый", code: "#95a5a6" },
                    { name: "Темно-синий", code: "#34495e" },
                    { name: "Красный", code: "#e74c3c" }
                ]
            },
            5: {
                title: "Краски акварельные (12 цветов)",
                price: 680,
                description: "Набор акварельных красок в кюветах, 12 цветов. Яркие, насыщенные цвета. Легко размываются водой. В комплекте кисть.",
                image: "https://images.unsplash.com/photo-1548425087-15a44711725f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Творчество"
            },
            6: {
                title: "Набор ручек (4 цвета)",
                price: 180,
                description: "Набор гелевых ручек 4 цвета (синий, красный, зеленый, черный). Эргономичный корпус. Длина линии письма: до 1200 м на каждую ручку.",
                image: "https://images.unsplash.com/photo-1519861531473-9200262188bf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Ручки"
            },
            7: {
                title: "Тетрадь 96 листов",
                price: 210,
                description: "Тетрадь в линейку с 96 листами. Обложка с твердым переплетом. Бумага повышенной плотности (70 г/м²). Подходит для конспектов.",
                image: "https://images.unsplash.com/photo-1568043210943-0e8aac4b9734?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Тетради",
                colors: [
                    { name: "Белая", code: "#ffffff" },
                    { name: "Бирюзовая", code: "#1abc9c" },
                    { name: "Оранжевая", code: "#e67e22" }
                ]
            },
            8: {
                title: "Папка для документов",
                price: 290,
                description: "Папка-регистратор с арочным механизмом. Вмещает до 250 листов. Обложка из плотного картона с виниловым покрытием. Размер А4.",
                image: "https://images.unsplash.com/photo-1579530190412-b35a65e17c8d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                category: "Офис",
                colors: [
                    { name: "Темно-синий", code: "#34495e" },
                    { name: "Красный", code: "#e74c3c" },
                    { name: "Черный", code: "#2c3e50" }
                ]
            }
        };
        
        // Глобальные переменные
        let cart = [];
        let currentUser = null;
        let allOrders = [];
        let currentProductId = null;
        let currentProductColor = null;
        const adminEmail = "admin@globus.ru"; // Админский email
        
        // Элементы страницы
        const mainContent = document.getElementById('mainContent');
        const profileBtn = document.getElementById('profileBtn');
        const cartBtn = document.getElementById('cartBtn');
        const cartCountElement = document.querySelector('.cart-count');
        const authModal = document.getElementById('authModal');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        
        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            // Проверяем, есть ли сохраненный пользователь
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateProfileButton();
            }
            
            // Проверяем, есть ли сохраненные заказы
            const savedOrders = localStorage.getItem('allOrders');
            if (savedOrders) {
                allOrders = JSON.parse(savedOrders);
            }
            
            // Проверяем, есть ли сохраненная корзина
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartCount();
            }
            
            // Инициализируем обработчики событий для товаров
            initProductHandlers();
            
            // Инициализируем выбор цвета для товаров
            initColorSelectors();
        });
        
        // Обработчики событий для навигации
        profileBtn.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentUser) {
                showProfilePage();
            } else {
                showAuthModal();
            }
        });
        
        cartBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showCartPage();
        });
        
        // Функции для отображения страниц
        function showCartPage() {
            if (cart.length === 0) {
                mainContent.innerHTML = `
                    <div class="container cart-page">
                        <h2 class="section-title">Корзина пуста</h2>
                        <p>В вашей корзине пока нет товаров. Перейдите в каталог, чтобы добавить товары.</p>
                        <a href="#" class="btn" id="continueShopping">Продолжить покупки</a>
                        <button class="back-btn" id="backToHomeFromEmptyCart">На главную</button>
                    </div>
                `;
                
                document.getElementById('continueShopping').addEventListener('click', (e) => {
                    e.preventDefault();
                    showHomePage();
                });
                
                document.getElementById('backToHomeFromEmptyCart').addEventListener('click', (e) => {
                    e.preventDefault();
                    showHomePage();
                });
                
                return;
            }
            
            mainContent.innerHTML = `
                <div class="container cart-page">
                    <h2 class="section-title">Ваша корзина</h2>
                    
                    <div class="cart-items">
                        ${generateCartItems()}
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Товары (${getTotalItems()} шт.)</span>
                            <span>${getSubtotal()} ₽</span>
                        </div>
                        <div class="summary-row">
                            <span>Доставка</span>
                            <span>${calculateDelivery()} ₽</span>
                        </div>
                        <div class="summary-row total">
                            <span>Итого</span>
                            <span>${getTotal()} ₽</span>
                        </div>
                    </div>
                    
                    <button class="btn" id="checkoutBtn" style="width: 100%; margin-top: 20px;">Оформить заказ</button>
                    <button class="back-btn" id="backToHomeFromCart" style="width: 100%;">На главную</button>
                </div>
            `;
            
            // Инициализируем обработчики событий для корзины
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = e.target.closest('.cart-item').getAttribute('data-id');
                    removeFromCart(productId);
                    showCartPage();
                });
            });
            
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('change', (e) => {
                    const productId = e.target.closest('.cart-item').getAttribute('data-id');
                    const newQuantity = parseInt(e.target.value);
                    updateCartItemQuantity(productId, newQuantity);
                    showCartPage();
                });
            });
            
            document.getElementById('checkoutBtn').addEventListener('click', () => {
                if (currentUser) {
                    showCheckoutPage();
                } else {
                    showAuthModal();
                }
            });
            
            document.getElementById('backToHomeFromCart').addEventListener('click', (e) => {
                e.preventDefault();
                showHomePage();
            });
        }
        
        function showCheckoutPage() {
            mainContent.innerHTML = `
                <div class="container">
                    <h2 class="section-title">Оформление заказа</h2>
                    
                    <div class="checkout-form">
                        <h3>Данные для доставки</h3>
                        <div class="form-group">
                            <label for="checkoutName">ФИО</label>
                            <input type="text" id="checkoutName" value="${currentUser.name}" required>
                        </div>
                        <div class="form-group">
                            <label for="checkoutEmail">Email</label>
                            <input type="email" id="checkoutEmail" value="${currentUser.email}" required>
                        </div>
                        <div class="form-group">
                            <label for="checkoutPhone">Телефон</label>
                            <input type="tel" id="checkoutPhone" value="${currentUser.phone || ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="checkoutAddress">Адрес доставки</label>
                            <textarea id="checkoutAddress" rows="3" required>${currentUser.address || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label for="checkoutComment">Комментарий к заказу</label>
                            <textarea id="checkoutComment" rows="3"></textarea>
                        </div>
                        
                        <h3 style="margin-top: 20px;">Способ оплаты</h3>
                        <div class="form-group">
                            <select id="paymentMethod">
                                <option value="cash">Наличными при получении</option>
                                <option value="card">Банковской картой онлайн</option>
                            </select>
                        </div>
                        
                        <div class="cart-summary" style="margin-top: 20px;">
                            <div class="summary-row">
                                <span>Товары (${getTotalItems()} шт.)</span>
                                <span>${getSubtotal()} ₽</span>
                            </div>
                            <div class="summary-row">
                                <span>Доставка</span>
                                <span>${calculateDelivery()} ₽</span>
                            </div>
                            <div class="summary-row total">
                                <span>Итого</span>
                                <span>${getTotal()} ₽</span>
                            </div>
                        </div>
                        
                        <button class="btn" id="placeOrderBtn" style="width: 100%; margin-top: 20px;">Подтвердить заказ</button>
                        <button class="back-btn" id="backToCartFromCheckout" style="width: 100%;">Вернуться в корзину</button>
                    </div>
                </div>
            `;
            
            document.getElementById('placeOrderBtn').addEventListener('click', placeOrder);
            document.getElementById('backToCartFromCheckout').addEventListener('click', (e) => {
                e.preventDefault();
                showCartPage();
            });
        }
        
        function showProfilePage() {
            let ordersHtml = '';
            
            if (currentUser.orders && currentUser.orders.length > 0) {
                ordersHtml = `
                    <h3 style="margin-top: 30px;">Ваши заказы</h3>
                    <div class="profile-orders">
                        ${generateUserOrders(currentUser.orders)}
                    </div>
                `;
            } else {
                ordersHtml = '<p>У вас пока нет заказов.</p>';
            }
            
            let adminPanel = '';
            if (currentUser.email === adminEmail) {
                adminPanel = `
                    <div class="admin-panel">
                        <h3>Административная панель</h3>
                        <p>Всего заказов: ${allOrders.length}</p>
                        
                        <div class="admin-orders">
                            <h4>Последние заказы:</h4>
                            ${generateAllOrders()}
                        </div>
                    </div>
                `;
            }
            
            mainContent.innerHTML = `
                <div class="container profile-page">
                    <div class="profile-header">
                        <div class="profile-avatar">${currentUser.name.charAt(0).toUpperCase()}</div>
                        <div class="profile-info">
                            <h2>${currentUser.name}</h2>
                            <p>${currentUser.email}</p>
                            <p>${currentUser.phone || 'Телефон не указан'}</p>
                            <p>${currentUser.address || 'Адрес не указан'}</p>
                        </div>
                    </div>
                    
                    <button class="btn" id="logoutBtn" style="margin-top: 15px;">Выйти</button>
                    <button class="back-btn" id="backToHomeFromProfile">На главную</button>
                    
                    ${ordersHtml}
                    ${adminPanel}
                </div>
            `;
            
            document.getElementById('logoutBtn').addEventListener('click', logout);
            document.getElementById('backToHomeFromProfile').addEventListener('click', (e) => {
                e.preventDefault();
                showHomePage();
            });
        }
        
        function showOrderSuccessPage(order) {
            // Отправляем уведомления на почту
            sendOrderEmail(order.user.email, order, 'customer');
            if (adminEmail) {
                sendOrderEmail(adminEmail, order, 'admin');
            }
            
            mainContent.innerHTML = `
                <div class="container" style="text-align: center; padding: 60px 0;">
                    <h2 class="section-title">Заказ успешно оформлен!</h2>
                    <p style="font-size: 16px; margin-bottom: 20px;">Номер вашего заказа: #${order.id}</p>
                    <p style="font-size: 16px; margin-bottom: 20px;">Сумма заказа: ${order.total} ₽</p>
                    <p style="font-size: 16px; margin-bottom: 30px;">Мы свяжемся с вами для подтверждения заказа.</p>
                    <p style="font-size: 14px; color: #7f8c8d; margin-bottom: 30px;">На ваш email отправлено уведомление с деталями заказа.</p>
                    <a href="#" class="btn" id="backToHome">Вернуться на главную</a>
                </div>
            `;
            
            document.getElementById('backToHome').addEventListener('click', (e) => {
                e.preventDefault();
                showHomePage();
            });
        }
        
        function sendOrderEmail(email, order, type) {
            // В реальном приложении здесь был бы запрос к серверу для отправки email
            console.log(`Email отправлен на ${email}`);
            console.log(`Тип уведомления: ${type}`);
            console.log('Детали заказа:', order);
            
            // Для демонстрации сохраняем "отправленные" письма в localStorage
            const emails = JSON.parse(localStorage.getItem('sentEmails') || '[]');
            const emailContent = generateEmailContent(order, type);
            
            emails.push({
                to: email,
                type: type,
                orderId: order.id,
                date: new Date().toISOString(),
                subject: emailContent.subject,
                body: emailContent.body
            });
            localStorage.setItem('sentEmails', JSON.stringify(emails));
        }
        
        function generateEmailContent(order, type) {
            let subject, body;
            
            if (type === 'customer') {
                subject = `Ваш заказ #${order.id} в магазине "ГЛОБУС"`;
                body = `
                    Уважаемый(ая) ${order.user.name},<br><br>
                    Благодарим вас за заказ в нашем магазине!<br><br>
                    <strong>Номер заказа:</strong> #${order.id}<br>
                    <strong>Дата заказа:</strong> ${formatDate(order.date)}<br>
                    <strong>Сумма заказа:</strong> ${order.total} ₽<br>
                    <strong>Способ оплаты:</strong> ${order.paymentMethod === 'cash' ? 'Наличными при получении' : 'Банковской картой онлайн'}<br><br>
                    
                    <strong>Состав заказа:</strong><br>
                    ${order.items.map(item => `
                        - ${item.title}${item.color ? ` (${item.color})` : ''} - ${item.price} ₽ × ${item.quantity} = ${item.price * item.quantity} ₽<br>
                    `).join('')}
                    <br>
                    <strong>Доставка:</strong> ${order.delivery} ₽<br>
                    <strong>Итого:</strong> ${order.total} ₽<br><br>
                    
                    <strong>Адрес доставки:</strong><br>
                    ${order.user.address}<br><br>
                    
                    Мы свяжемся с вами для подтверждения заказа.<br><br>
                    С уважением,<br>
                    Магазин канцелярии "ГЛОБУС"
                `;
            } else {
                subject = `Новый заказ #${order.id} от ${order.user.name}`;
                body = `
                    Поступил новый заказ!<br><br>
                    <strong>Номер заказа:</strong> #${order.id}<br>
                    <strong>Клиент:</strong> ${order.user.name} (${order.user.email})<br>
                    <strong>Телефон:</strong> ${order.user.phone}<br>
                    <strong>Дата заказа:</strong> ${formatDate(order.date)}<br>
                    <strong>Сумма заказа:</strong> ${order.total} ₽<br>
                    <strong>Способ оплаты:</strong> ${order.paymentMethod === 'cash' ? 'Наличными при получении' : 'Банковской картой онлайн'}<br><br>
                    
                    <strong>Состав заказа:</strong><br>
                    ${order.items.map(item => `
                        - ${item.title}${item.color ? ` (${item.color})` : ''} - ${item.price} ₽ × ${item.quantity} = ${item.price * item.quantity} ₽<br>
                    `).join('')}
                    <br>
                    <strong>Доставка:</strong> ${order.delivery} ₽<br>
                    <strong>Итого:</strong> ${order.total} ₽<br><br>
                    
                    <strong>Адрес доставки:</strong><br>
                    ${order.user.address}<br><br>
                    
                    <strong>Комментарий к заказу:</strong><br>
                    ${order.comment || 'Нет комментария'}
                `;
            }
            
            return { subject, body };
        }
        
        function showAuthModal() {
            authModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function showHomePage() {
            mainContent.innerHTML = `
                <section class="hero">
                    <h1>Магазин канцелярии ГЛОБУС</h1>
                    <p>Широкий ассортимент качественных канцелярских товаров для офиса, школы и творчества</p>
                    <a href="#products" class="btn">Перейти к товарам</a>
                </section>
                
                <section id="products" class="products">
                    <div class="container">
                        <h2 class="section-title">Наши товары</h2>
                        
                        <div class="categories">
                            <button class="category-btn active">Все товары</button>
                            <button class="category-btn">Ручки</button>
                            <button class="category-btn">Тетради</button>
                            <button class="category-btn">Бумага</button>
                            <button class="category-btn">Офис</button>
                            <button class="category-btn">Творчество</button>
                        </div>
                        
                        <div class="products-grid">
                            ${generateProductCards()}
                        </div>
                    </div>
                </section>
                
                <section class="about">
                    <div class="container">
                        <h2 class="section-title">О нашем магазине</h2>
                        <div class="about-content">
                            <div class="about-text">
                                <p>Магазин "ГЛОБУС" - это место, где вы найдете все необходимое для работы, учебы и творчества. Мы работаем на рынке канцелярских товаров более 10 лет и за это время заслужили доверие тысяч клиентов.</p>
                                <p>В нашем ассортименте представлены товары от ведущих мировых производителей: ручки, карандаши, тетради, блокноты, бумага, папки, скрепки и многое другое. Мы тщательно отбираем продукцию, чтобы предложить нашим клиентам только лучшее.</p>
                                <p>Наши цены приятно удивят вас, а качество обслуживания сделает покупки комфортными и приятными.</p>
                            </div>
                            <div class="about-image">
                                <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Канцелярские товары">
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="contacts">
                    <div class="container">
                        <h2 class="section-title">Контакты</h2>
                        <div class="contact-info">
                            <div class="contact-card">
                                <h3>Адрес</h3>
                                <p>г. Москва, ул. Канцелярская, д. 15</p>
                                <p>ТЦ "Офисный", 2 этаж</p>
                            </div>
                            <div class="contact-card">
                                <h3>Телефон</h3>
                                <p>+7 (495) 123-45-67</p>
                                <p>+7 (800) 123-45-67</p>
                            </div>
                            <div class="contact-card">
                                <h3>Режим работы</h3>
                                <p>Пн-Пт: 9:00 - 21:00</p>
                                <p>Сб-Вс: 10:00 - 20:00</p>
                            </div>
                        </div>
                    </div>
                </section>
            `;
            
            // Инициализируем обработчики событий для товаров
            initProductHandlers();
            initColorSelectors();
        }
        
        // Генераторы HTML
        function generateProductCards() {
            return Object.keys(productsData).map(id => {
                const product = productsData[id];
                let colorOptions = '';
                
                if (product.colors) {
                    colorOptions = `
                        <div class="color-options">
                            ${product.colors.map((color, index) => `
                                <div class="color-option ${index === 0 ? 'selected' : ''}" 
                                     style="background-color: ${color.code}; ${color.code === '#ffffff' ? 'border: 1px solid #ddd;' : ''}" 
                                     data-color="${color.name}"></div>
                            `).join('')}
                        </div>
                    `;
                }
                
                return `
                    <div class="product-card" data-id="${id}" data-category="${product.category}">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.title}">
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">${product.title}</h3>
                            ${colorOptions}
                            <div class="product-price">${product.price} ₽</div>
                            <button class="add-to-cart">В корзину</button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function generateCartItems() {
            return cart.map(item => `
                <div class="cart-item" data-id="${item.id}">
                    <img src="${item.image}" alt="${item.title}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h4 class="cart-item-title">${item.title}</h4>
                        ${item.color ? `<div class="cart-item-color">Цвет: ${item.color}</div>` : ''}
                        <div class="cart-item-price">${item.price} ₽</div>
                    </div>
                    <div class="cart-item-actions">
                        <input type="number" class="quantity-input" value="${item.quantity}" min="1">
                        <span class="remove-item">&times;</span>
                    </div>
                </div>
            `).join('');
        }
        
        function generateUserOrders(orders) {
            return orders.map(order => `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <strong>Заказ #${order.id}</strong>
                            <span style="margin-left: 10px; color: #7f8c8d;">${formatDate(order.date)}</span>
                        </div>
                        <div>
                            <strong>${order.total} ₽</strong>
                            <span style="margin-left: 10px; color: ${getStatusColor(order.status)}">${order.status}</span>
                        </div>
                    </div>
                    
                    <div class="order-details">
                        <p><strong>Клиент:</strong> ${order.user.name}</p>
                        <p><strong>Телефон:</strong> ${order.user.phone}</p>
                        <p><strong>Адрес:</strong> ${order.user.address}</p>
                        <p><strong>Способ оплаты:</strong> ${order.paymentMethod === 'cash' ? 'Наличными при получении' : 'Банковской картой онлайн'}</p>
                        ${order.comment ? `<p><strong>Комментарий:</strong> ${order.comment}</p>` : ''}
                    </div>
                    
                    <div class="order-products">
                        ${order.items.map(item => `
                            <div class="order-product">
                                <img src="${item.image}" alt="${item.title}">
                                <div class="order-product-info">
                                    <div class="order-product-title">${item.title}</div>
                                    ${item.color ? `<div class="order-product-color">Цвет: ${item.color}</div>` : ''}
                                    <div class="order-product-price">${item.price} ₽ × ${item.quantity} = ${item.price * item.quantity} ₽</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }
        
        function generateAllOrders() {
            return allOrders.slice().reverse().slice(0, 5).map(order => `
                <div class="user-order">
                    <div class="user-info">
                        ${order.user.name} (${order.user.email})
                    </div>
                    <div>
                        <strong>Заказ #${order.id}</strong> - ${order.total} ₽ - ${formatDate(order.date)} - 
                        <span style="color: ${getStatusColor(order.status)}">${order.status}</span>
                    </div>
                    <div style="margin-top: 8px;">
                        <strong>Телефон:</strong> ${order.user.phone}
                    </div>
                    <div>
                        <strong>Адрес:</strong> ${order.user.address}
                    </div>
                    ${currentUser.email === adminEmail ? `
                    <div class="order-status-actions">
                        <button class="btn" data-order-id="${order.id}" data-action="process" style="background-color: #f39c12;">В обработке</button>
                        <button class="btn" data-order-id="${order.id}" data-action="ship" style="background-color: #9b59b6;">Отправлен</button>
                        <button class="btn" data-order-id="${order.id}" data-action="complete" style="background-color: #2ecc71;">Завершен</button>
                    </div>
                    ` : ''}
                </div>
            `).join('');
        }
        
        // Функции для работы с корзиной
        function addToCart(productId, quantity, color = null) {
            const product = productsData[productId];
            const existingItemIndex = cart.findIndex(item => item.id === productId && item.color === color);
            
            if (existingItemIndex !== -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                cart.push({
                    id: productId,
                    title: product.title,
                    price: product.price,
                    quantity: quantity,
                    image: product.image,
                    color: color
                });
            }
            
            updateCartCount();
            saveCart();
            showAddedToCartNotification(product.title, quantity);
        }
        
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
            saveCart();
        }
        
        function updateCartItemQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = newQuantity;
                saveCart();
            }
        }
        
        function getSubtotal() {
            return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        }
        
        function getTotalItems() {
            return cart.reduce((sum, item) => sum + item.quantity, 0);
        }
        
        function calculateDelivery() {
            return getSubtotal() > 2000 ? 0 : 300;
        }
        
        function getTotal() {
            return getSubtotal() + calculateDelivery();
        }
        
        function updateCartCount() {
            const totalItems = getTotalItems();
            cartCountElement.textContent = totalItems;
        }
        
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        
        // Функции для работы с заказами
        function placeOrder() {
            const name = document.getElementById('checkoutName').value;
            const email = document.getElementById('checkoutEmail').value;
            const phone = document.getElementById('checkoutPhone').value;
            const address = document.getElementById('checkoutAddress').value;
            const comment = document.getElementById('checkoutComment').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            if (!name || !email || !phone || !address) {
                alert('Пожалуйста, заполните все обязательные поля');
                return;
            }
            
            // Обновляем данные пользователя, если они изменились
            currentUser.name = name;
            currentUser.email = email;
            currentUser.phone = phone;
            currentUser.address = address;
            saveUser();
            
            // Создаем заказ
            const order = {
                id: generateOrderId(),
                date: new Date().toISOString(),
                user: {
                    id: currentUser.id,
                    name: currentUser.name,
                    email: currentUser.email,
                    phone: currentUser.phone,
                    address: currentUser.address
                },
                items: [...cart],
                subtotal: getSubtotal(),
                delivery: calculateDelivery(),
                total: getTotal(),
                paymentMethod: paymentMethod,
                status: 'Новый',
                comment: comment
            };
            
            // Добавляем заказ в историю пользователя
            if (!currentUser.orders) {
                currentUser.orders = [];
            }
            currentUser.orders.push(order);
            saveUser();
            
            // Добавляем заказ в общий список заказов
            allOrders.push(order);
            saveAllOrders();
            
            // Очищаем корзину
            cart = [];
            saveCart();
            updateCartCount();
            
            // Показываем страницу успешного оформления заказа
            showOrderSuccessPage(order);
        }
        
        function generateOrderId() {
            return Math.floor(100000 + Math.random() * 900000);
        }
        
        function updateOrderStatus(orderId, status) {
            // Обновляем в общих заказах
            const orderIndex = allOrders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                allOrders[orderIndex].status = status;
                saveAllOrders();
            }
            
            // Обновляем в заказах пользователя (если он есть)
            if (currentUser && currentUser.orders) {
                const userOrderIndex = currentUser.orders.findIndex(o => o.id === orderId);
                if (userOrderIndex !== -1) {
                    currentUser.orders[userOrderIndex].status = status;
                    saveUser();
                }
            }
            
            // Если мы на странице профиля, обновляем ее
            if (mainContent.querySelector('.profile-page')) {
                showProfilePage();
            }
        }
        
        function saveAllOrders() {
            localStorage.setItem('allOrders', JSON.stringify(allOrders));
        }
        
        // Функции для работы с пользователем
        function login(email, password) {
            // В реальном приложении здесь был бы запрос к серверу
            // Для демонстрации просто создаем пользователя
            if (email === adminEmail && password === 'admin123') {
                currentUser = {
                    id: 'admin',
                    name: 'Администратор',
                    email: adminEmail,
                    isAdmin: true
                };
            } else {
                // Проверяем, есть ли пользователь в localStorage
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const user = users.find(u => u.email === email && u.password === password);
                
                if (!user) {
                    alert('Неверный email или пароль');
                    return false;
                }
                
                currentUser = {
                    id: user.id,
                    name: user.name,
                    email: user.email,
                    address: user.address,
                    phone: user.phone,
                    orders: user.orders || []
                };
            }
            
            saveUser();
            updateProfileButton();
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Если пользователь открыл модальное окно из корзины, показываем оформление заказа
            if (mainContent.querySelector('.cart-page')) {
                showCheckoutPage();
            }
            
            return true;
        }
        
        function register(name, email, password, address) {
            // Проверяем, есть ли уже пользователь с таким email
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.some(u => u.email === email)) {
                alert('Пользователь с таким email уже зарегистрирован');
                return false;
            }
            
            // Создаем нового пользователя
            const newUser = {
                id: generateUserId(),
                name,
                email,
                password,
                address,
                orders: []
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            // Автоматически входим под новым пользователем
            currentUser = {
                id: newUser.id,
                name: newUser.name,
                email: newUser.email,
                address: newUser.address,
                orders: newUser.orders
            };
            
            saveUser();
            updateProfileButton();
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Если пользователь открыл модальное окно из корзины, показываем оформление заказа
            if (mainContent.querySelector('.cart-page')) {
                showCheckoutPage();
            }
            
            return true;
        }
        
        function generateUserId() {
            return 'user_' + Math.random().toString(36).substr(2, 9);
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateProfileButton();
            showHomePage();
        }
        
        function saveUser() {
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Также обновляем информацию в списке пользователей (если это не админ)
                if (currentUser.email !== adminEmail) {
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    const userIndex = users.findIndex(u => u.id === currentUser.id);
                    
                    if (userIndex !== -1) {
                        users[userIndex] = {
                            ...users[userIndex],
                            name: currentUser.name,
                            email: currentUser.email,
                            address: currentUser.address,
                            phone: currentUser.phone,
                            orders: currentUser.orders || []
                        };
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                }
            }
        }
        
        function updateProfileButton() {
            if (currentUser) {
                profileBtn.textContent = currentUser.name.split(' ')[0]; // Показываем только имя
            } else {
                profileBtn.textContent = 'Профиль';
            }
        }
        
        // Инициализация выбора цвета
        function initColorSelectors() {
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    const container = this.closest('.color-options');
                    if (container) {
                        container.querySelectorAll('.color-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        this.classList.add('selected');
                    }
                });
            });
        }
        
        // Вспомогательные функции
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        function getStatusColor(status) {
            switch (status) {
                case 'Новый': return '#3498db';
                case 'В обработке': return '#f39c12';
                case 'Отправлен': return '#9b59b6';
                case 'Завершен': return '#2ecc71';
                case 'Отменен': return '#e74c3c';
                default: return '#7f8c8d';
            }
        }
        
        function showAddedToCartNotification(productTitle, quantity) {
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.bottom = '15px';
            notification.style.right = '15px';
            notification.style.backgroundColor = '#2ecc71';
            notification.style.color = 'white';
            notification.style.padding = '12px 20px';
            notification.style.borderRadius = '5px';
            notification.style.boxShadow = '0 2px 8px rgba(0,0,0,0.2)';
            notification.style.zIndex = '1000';
            notification.style.animation = 'fadeIn 0.3s';
            notification.style.fontSize = '14px';
            
            if (quantity > 1) {
                notification.textContent = `Добавлено ${quantity} шт. "${productTitle}" в корзину`;
            } else {
                notification.textContent = `Добавлено "${productTitle}" в корзину`;
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Инициализация обработчиков событий
        function initProductHandlers() {
            // Обработчики для карточек товаров
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (e.target.classList.contains('add-to-cart') || e.target.classList.contains('color-option')) {
                        return;
                    }
                    
                    const productId = card.getAttribute('data-id');
                    const product = productsData[productId];
                    
                    document.getElementById('modalProductImage').src = product.image;
                    document.getElementById('modalProductTitle').textContent = product.title;
                    document.getElementById('modalProductPrice').textContent = `${product.price} ₽`;
                    document.getElementById('modalProductDescription').textContent = product.description;
                    document.querySelector('.quantity-input').value = 1;
                    
                    // Обработка цветов
                    const colorContainer = document.getElementById('modalProductColorContainer');
                    const colorOptions = document.getElementById('modalColorOptions');
                    
                    if (product.colors) {
                        colorContainer.style.display = 'block';
                        colorOptions.innerHTML = product.colors.map(color => `
                            <div class="color-option ${color.name === product.colors[0].name ? 'selected' : ''}" 
                                 style="background-color: ${color.code}; ${color.code === '#ffffff' ? 'border: 1px solid #ddd;' : ''}" 
                                 data-color="${color.name}"></div>
                        `).join('');
                        
                        currentProductColor = product.colors[0].name;
                    } else {
                        colorContainer.style.display = 'none';
                        currentProductColor = null;
                    }
                    
                    // Инициализация выбора цвета в модальном окне
                    document.querySelectorAll('#modalColorOptions .color-option').forEach(option => {
                        option.addEventListener('click', function() {
                            document.querySelectorAll('#modalColorOptions .color-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            this.classList.add('selected');
                            currentProductColor = this.getAttribute('data-color');
                        });
                    });
                    
                    document.getElementById('productModal').style.display = 'block';
                    document.body.style.overflow = 'hidden';
                    
                    // Устанавливаем текущий товар
                    currentProductId = productId;
                });
            });
            
            // Обработчики для кнопок "В корзину" на карточках товаров
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const productId = btn.closest('.product-card').getAttribute('data-id');
                    const colorOption = btn.closest('.product-info').querySelector('.color-option.selected');
                    const color = colorOption ? colorOption.getAttribute('data-color') : null;
                    addToCart(productId, 1, color);
                });
            });
            
            // Обработчики для модального окна товара
            document.querySelector('.quantity-btn.minus').addEventListener('click', () => {
                const input = document.querySelector('.quantity-input');
                if (input.value > 1) {
                    input.value--;
                }
            });
            
            document.querySelector('.quantity-btn.plus').addEventListener('click', () => {
                const input = document.querySelector('.quantity-input');
                input.value++;
            });
            
            document.getElementById('addToCartModal').addEventListener('click', () => {
                if (currentProductId) {
                    const quantity = parseInt(document.querySelector('.quantity-input').value);
                    addToCart(currentProductId, quantity, currentProductColor);
                    document.getElementById('productModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Обработчики для фильтрации по категориям
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    const category = btn.textContent;
                    const productCards = document.querySelectorAll('.product-card');
                    
                    productCards.forEach(card => {
                        if (category === 'Все товары' || card.getAttribute('data-category') === category) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        }
        
        // Обработчики для модального окна авторизации
        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(`${tab.dataset.tab}Form`).classList.add('active');
            });
        });
        
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            login(email, password);
        });
        
        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const address = document.getElementById('registerAddress').value;
            register(name, email, password, address);
        });
        
        // Обработчики для закрытия модальных окон
        closeModalBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.style.display = 'none';
                });
                document.body.style.overflow = 'auto';
            });
        });
        
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Обработчики для админских действий
        document.addEventListener('click', (e) => {
            if (e.target.hasAttribute('data-order-id') && e.target.hasAttribute('data-action')) {
                const orderId = parseInt(e.target.getAttribute('data-order-id'));
                const action = e.target.getAttribute('data-action');
                
                let status;
                switch (action) {
                    case 'process': status = 'В обработке'; break;
                    case 'ship': status = 'Отправлен'; break;
                    case 'complete': status = 'Завершен'; break;
                }
                
                if (status) {
                    updateOrderStatus(orderId, status);
                }
            }
        });
    </script>
</body>
</html>