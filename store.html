<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞–≥–∞–∑–∏–Ω</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
            max-width: 800px;
            margin: 0 auto;
        }
        .profile {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        .name {
            font-weight: bold;
            font-size: 18px;
        }
        .menu {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        .menu-btn {
            padding: 15px;
            background: #2481cc;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
        }
        .menu-btn:hover {
            background: #1a6fb3;
        }
        .hidden {
            display: none;
        }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        .product-card {
            background: white;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .product-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
        }
        .admin-panel {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .form-group {
            margin-bottom: 10px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .lottery-seats {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        .seat {
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
        }
        .seat.booked {
            background: #ff6b6b;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="profile">
        <div class="avatar" id="user-avatar">üë§</div>
        <div class="name" id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="menu">
        <button class="menu-btn" onclick="showSection('products')">üõçÔ∏è –¢–æ–≤–∞—Ä—ã</button>
        <button class="menu-btn" onclick="showSection('lotteries')">üé∞ –õ–æ—Ç–µ—Ä–µ–∏</button>
        <button class="menu-btn" onclick="showSection('cart')">üõí –ö–æ—Ä–∑–∏–Ω–∞</button>
    </div>

    <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div id="admin-panel" class="admin-panel hidden">
        <h3>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
        <button onclick="showAdminForm('product')">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
        <button onclick="showAdminForm('lottery')">–°–æ–∑–¥–∞—Ç—å –ª–æ—Ç–µ—Ä–µ—é</button>

        <div id="product-form" class="hidden">
            <h4>–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h4>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="product-name">
            </div>
            <div class="form-group">
                <label>–¶–µ–Ω–∞:</label>
                <input type="number" id="product-price">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="product-desc"></textarea>
            </div>
            <div class="form-group">
                <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL):</label>
                <input type="text" id="product-image">
            </div>
            <button onclick="addProduct()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>

        <div id="lottery-form" class="hidden">
            <h4>–ù–æ–≤–∞—è –ª–æ—Ç–µ—Ä–µ—è</h4>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="lottery-title">
            </div>
            <div class="form-group">
                <label>–¶–µ–Ω–∞ –±–∏–ª–µ—Ç–∞:</label>
                <input type="number" id="lottery-price">
            </div>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç:</label>
                <input type="number" id="lottery-seats">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="lottery-desc"></textarea>
            </div>
            <div class="form-group">
                <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL):</label>
                <input type="text" id="lottery-image">
            </div>
            <button onclick="addLottery()">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div id="products-section">
        <h2>–ù–∞—à–∏ —Ç–æ–≤–∞—Ä—ã</h2>
        <div class="products-grid" id="products-grid">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –ª–æ—Ç–µ—Ä–µ–π -->
    <div id="lotteries-section" class="hidden">
        <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –ª–æ—Ç–µ—Ä–µ–∏</h2>
        <div class="products-grid" id="lotteries-grid">
            <!-- –õ–æ—Ç–µ—Ä–µ–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã -->
    <div id="cart-section" class="hidden">
        <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
        <div id="cart-items">
            <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
        </div>
    </div>

    <!-- –î–µ—Ç–∞–ª–∏ –ª–æ—Ç–µ—Ä–µ–∏ -->
    <div id="lottery-details" class="hidden">
        <h2 id="lottery-detail-title"></h2>
        <img id="lottery-detail-image" class="product-image">
        <p id="lottery-detail-desc"></p>
        <p id="lottery-detail-price"></p>
        
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ:</h3>
        <div class="lottery-seats" id="lottery-seats">
            <!-- –ú–µ—Å—Ç–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>
        
        <button class="menu-btn" onclick="bookSeat()">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
        <button class="menu-btn" onclick="backToLotteries()">–ù–∞–∑–∞–¥</button>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('user_id');
        const isAdmin = userId === '123456789'; // –í–∞—à ID –∞–¥–º–∏–Ω–∞
        
        let currentLottery = null;
        let selectedSeat = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('user-name').textContent = isAdmin ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–∫—É–ø–∞—Ç–µ–ª—å';
            
            if (isAdmin) {
                document.getElementById('admin-panel').classList.remove('hidden');
            }
            
            loadProducts();
            loadLotteries();
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–µ–∫—Ü–∏–∏
        function showSection(section) {
            document.getElementById('products-section').classList.add('hidden');
            document.getElementById('lotteries-section').classList.add('hidden');
            document.getElementById('cart-section').classList.add('hidden');
            document.getElementById('lottery-details').classList.add('hidden');
            
            document.getElementById(section + '-section').classList.remove('hidden');
        }

        // –ê–¥–º–∏–Ω-—Ñ–æ—Ä–º—ã
        function showAdminForm(type) {
            document.getElementById('product-form').classList.add('hidden');
            document.getElementById('lottery-form').classList.add('hidden');
            document.getElementById(type + '-form').classList.remove('hidden');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
        function loadProducts() {
            // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API/–ë–î
            const mockProducts = [
                {id: 1, name: "–¢–æ–≤–∞—Ä 1", price: 1000, description: "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞", image: "https://via.placeholder.com/300"},
                {id: 2, name: "–¢–æ–≤–∞—Ä 2", price: 2000, description: "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞", image: "https://via.placeholder.com/300"}
            ];
            
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';
            
            mockProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <img src="${product.image}" class="product-image">
                    <h3>${product.name}</h3>
                    <p>${product.price} —Ä—É–±.</p>
                    <button onclick="addToCart(${product.id})">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                `;
                grid.appendChild(card);
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ—Ç–µ—Ä–µ–π
        function loadLotteries() {
            // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API/–ë–î
            const mockLotteries = [
                {id: 1, title: "–õ–æ—Ç–µ—Ä–µ—è 1", price: 500, seats: 10, description: "–û–ø–∏—Å–∞–Ω–∏–µ –ª–æ—Ç–µ—Ä–µ–∏", image: "https://via.placeholder.com/300"},
                {id: 2, title: "–õ–æ—Ç–µ—Ä–µ—è 2", price: 1000, seats: 5, description: "–û–ø–∏—Å–∞–Ω–∏–µ –ª–æ—Ç–µ—Ä–µ–∏", image: "https://via.placeholder.com/300"}
            ];
            
            const grid = document.getElementById('lotteries-grid');
            grid.innerHTML = '';
            
            mockLotteries.forEach(lottery => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <img src="${lottery.image}" class="product-image">
                    <h3>${lottery.title}</h3>
                    <p>${lottery.price} —Ä—É–±. –∑–∞ –±–∏–ª–µ—Ç</p>
                    <button onclick="viewLottery(${lottery.id})">–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å</button>
                `;
                grid.appendChild(card);
            });
        }

        // –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ—Ç–µ—Ä–µ–∏
        function viewLottery(lotteryId) {
            // –ó–¥–µ—Å—å –∑–∞–ø—Ä–æ—Å –∫ API –∑–∞ –¥–µ—Ç–∞–ª—è–º–∏ –ª–æ—Ç–µ—Ä–µ–∏
            currentLottery = {
                id: lotteryId,
                title: "–õ–æ—Ç–µ—Ä–µ—è " + lotteryId,
                price: 1000,
                seats: 10,
                description: "–û–ø–∏—Å–∞–Ω–∏–µ –ª–æ—Ç–µ—Ä–µ–∏",
                image: "https://via.placeholder.com/300"
            };
            
            document.getElementById('lottery-detail-title').textContent = currentLottery.title;
            document.getElementById('lottery-detail-image').src = currentLottery.image;
            document.getElementById('lottery-detail-desc').textContent = currentLottery.description;
            document.getElementById('lottery-detail-price').textContent = `–¶–µ–Ω–∞: ${currentLottery.price} —Ä—É–±.`;
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Å—Ç
            const seatsContainer = document.getElementById('lottery-seats');
            seatsContainer.innerHTML = '';
            
            for (let i = 1; i <= currentLottery.seats; i++) {
                const seat = document.createElement('div');
                seat.className = 'seat';
                seat.textContent = i;
                seat.onclick = function() {
                    if (!seat.classList.contains('booked')) {
                        document.querySelectorAll('.seat').forEach(s => s.classList.remove('selected'));
                        seat.classList.add('selected');
                        selectedSeat = i;
                    }
                };
                seatsContainer.appendChild(seat);
            }
            
            showSection('lottery-details');
        }

        // –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
        function bookSeat() {
            if (!selectedSeat) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ!');
                return;
            }
            
            alert(`–ú–µ—Å—Ç–æ ${selectedSeat} –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ!`);
            // –ó–¥–µ—Å—å –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–∞
            backToLotteries();
        }

        // –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ª–æ—Ç–µ—Ä–µ–π
        function backToLotteries() {
            showSection('lotteries');
        }

        // –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(productId) {
            alert('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!');
            // –ó–¥–µ—Å—å –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–∞
        }

        // –ê–¥–º–∏–Ω: –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
        function addProduct() {
            const name = document.getElementById('product-name').value;
            const price = document.getElementById('product-price').value;
            const desc = document.getElementById('product-desc').value;
            const image = document.getElementById('product-image').value || "https://via.placeholder.com/300";
            
            if (!name || !price || !desc) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–∞
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify({
                    action: 'add_product',
                    name: name,
                    price: price,
                    desc: desc,
                    image: image
                }));
            } else {
                alert('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!');
                document.getElementById('product-form').reset();
                loadProducts();
            }
        }

        // –ê–¥–º–∏–Ω: –¥–æ–±–∞–≤–∏—Ç—å –ª–æ—Ç–µ—Ä–µ—é
        function addLottery() {
            const title = document.getElementById('lottery-title').value;
            const price = document.getElementById('lottery-price').value;
            const seats = document.getElementById('lottery-seats').value;
            const desc = document.getElementById('lottery-desc').value;
            const image = document.getElementById('lottery-image').value || "https://via.placeholder.com/300";
            
            if (!title || !price || !seats || !desc) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–∞
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify({
                    action: 'add_lottery',
                    title: title,
                    price: price,
                    seats: seats,
                    desc: desc,
                    image: image
                }));
            } else {
                alert('–õ–æ—Ç–µ—Ä–µ—è —Å–æ–∑–¥–∞–Ω–∞!');
                document.getElementById('lottery-form').reset();
                loadLotteries();
            }
        }
    </script>
</body>
</html>